{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import FormikValidationError from\"components/React/FormikValidationError/FormikValidationError\";import toast from\"components/React/ToastNotifier/ToastNotifier\";import Button from\"components/UI/Forms/Buttons\";import{useFormik}from\"formik\";import React from\"react\";import{connect}from\"react-redux\";import{getTestParametersAction}from\"store/modules/testParamters/getTestParameters\";import{postTestParametersAction}from\"store/modules/testParamters/postTestParameters\";import{updateTestParametersAction}from\"store/modules/testParamters/updateTestParameters\";import{testParametersInitialValues,testParametersValidationSchema}from\"./schema\";import{useTranslation}from\"react-i18next\";import{PARAMETER_TYPES_OPTIONS}from\"constants/constants\";import StyledSelect from\"components/React/StyledSelect/StyledSelect\";import TooltipLabel from\"components/UI/TooltipLabel\";var Form=function Form(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _React$useState=React.useState(testParametersInitialValues),_React$useState2=_slicedToArray(_React$useState,2),initialData=_React$useState2[0],seetInitialData=_React$useState2[1];React.useEffect(function(){if(props.editData){seetInitialData(_objectSpread(_objectSpread({},props.editData),{},{types:PARAMETER_TYPES_OPTIONS.find(function(item){return item.value===props.editData.types;})||null}));}},[props.editData]);var _useFormik=useFormik({enableReinitialize:true,initialValues:initialData,validationSchema:testParametersValidationSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(submitValue,_ref){var resetForm,res,_submitValue$types,_submitValue$types2,_Object$values,_errors;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:resetForm=_ref.resetForm;if(!props.editData){_context.next=7;break;}_context.next=4;return props.updateTestParametersAction(props.editData.id,_objectSpread(_objectSpread({},submitValue),{},{types:(_submitValue$types=submitValue.types)===null||_submitValue$types===void 0?void 0:_submitValue$types.value}));case 4:res=_context.sent;_context.next=10;break;case 7:_context.next=9;return props.postTestParametersAction(_objectSpread(_objectSpread({},submitValue),{},{types:(_submitValue$types2=submitValue.types)===null||_submitValue$types2===void 0?void 0:_submitValue$types2.value}));case 9:res=_context.sent;case 10:if(res.status===201||res.status===200){if(res.status===201){resetForm();toast.success(t(\"home:postSuccess\"));}else{props.setEditData(null);seetInitialData(testParametersInitialValues);toast.success(t(\"home:updateSuccess\"));}props.getTestParametersAction();}else{_errors=(_Object$values=Object.values(res.data))===null||_Object$values===void 0?void 0:_Object$values.map(function(item){toast.error(item[0]);});}case 11:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()}),values=_useFormik.values,errors=_useFormik.errors,touched=_useFormik.touched,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,handleSubmit=_useFormik.handleSubmit,setFieldTouched=_useFormik.setFieldTouched,setFieldValue=_useFormik.setFieldValue;return/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();handleSubmit(e);}},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"home:parameter\"),\" \",t(\"home:name\"),\":\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",name:\"parameter_name\",value:values.parameter_name,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"parameter_name\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"home:unit\"),\":\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",name:\"unit\",value:values.unit,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"unit\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"home:ndwq\"),\" \",/*#__PURE__*/React.createElement(TooltipLabel,{id:\"NDWQ\",text:\"The quality standards for drinking water\"}),\":\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",name:\"NDWQS_standard\",value:values.NDWQS_standard,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"NDWQS_standard\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"home:types\"),\":\"),/*#__PURE__*/React.createElement(StyledSelect,{name:\"types\",value:values===null||values===void 0?void 0:values.types,options:PARAMETER_TYPES_OPTIONS,onChange:function onChange(_ref2){var name=_ref2.name,value=_ref2.value;setFieldValue(name,value);},onBlur:function onBlur(){setFieldTouched(\"types\",true);}}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"types\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"btn custom-btn  mr-3\",text:t(\"home:save\"),disabled:props.loading,loading:props.loading}))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,loading:state.testParamtersData.postTestParameters.isFetching||state.testParamtersData.updateTestParameters.isFetching};};var mapDispatchToProps={getTestParametersAction:getTestParametersAction,updateTestParametersAction:updateTestParametersAction,postTestParametersAction:postTestParametersAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(Form);","map":null,"metadata":{},"sourceType":"module"}