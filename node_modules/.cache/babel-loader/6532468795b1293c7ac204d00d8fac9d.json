{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{DeleteIcon,EditIconDark}from\"assets/images/xd\";import toast from\"components/React/ToastNotifier/ToastNotifier\";import ConfirmationModal from\"components/UI/ConfirmationModal\";import useDeleteConfirmation from\"hooks/useDeleteConfirmation\";import{getNumberByLanguage}from\"i18n/i18n\";import React from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import{deleteComponentLogsAction}from\"store/modules/componentLogs/deleteComponentLogs\";import{getComponentLogsAction}from\"store/modules/componentLogs/getComponentLogs\";import{getComponentLogsByIdAction}from\"store/modules/componentLogs/getComponentLogsById\";var ManageComponentLists=function ManageComponentLists(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useDeleteConfirmatio=useDeleteConfirmation(),editId=_useDeleteConfirmatio.editId,modal=_useDeleteConfirmatio.modal,handleDeleteClick=_useDeleteConfirmatio.handleDeleteClick,resetDeleteData=_useDeleteConfirmatio.resetDeleteData,toggleModal=_useDeleteConfirmatio.toggleModal;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),logTypeData=_React$useState2[0],setLogTypeData=_React$useState2[1];React.useEffect(function(){if(props.language){props.getComponentLogsAction(props.language);}},[props.language]);React.useEffect(function(){if(props.componentInfoLogs){if(props.issueType){var issueLogs=props.componentInfoLogs.filter(function(item){return item.log_type===\"Issue\";});setLogTypeData(issueLogs);}else{var maintainanceLog=props.componentInfoLogs.filter(function(item){return item.log_type!=='Issue';});setLogTypeData(maintainanceLog);}}},[props.componentInfoLogs,props.issueType]);var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return props.deleteComponentLogsAction(editId);case 2:response=_context.sent;if(response.status===204){toast.success(t(\"home:deleteSuccess\"));props.getComponentLogsAction(props.language);}else{toast.error(t(\"home:deleteError\"));}toggleModal();case 5:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref.apply(this,arguments);};}();var handleEditClick=function handleEditClick(id){props.getComponentLogsByIdAction(props.language,id);};return/*#__PURE__*/React.createElement(\"div\",{className:\"data-table mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table mt-2\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,t(\"home:sn\")),/*#__PURE__*/React.createElement(\"th\",null,t(\"maintainance:component\")),/*#__PURE__*/React.createElement(\"th\",null,t(\"home:maintainance\"),\" \",t(\"home:date\")),/*#__PURE__*/React.createElement(\"th\",null,t(\"home:duration\")),/*#__PURE__*/React.createElement(\"th\",null,t(\"home:total\"),\" \",t(\"home:cost\")),/*#__PURE__*/React.createElement(\"th\",null,t(\"home:action\")))),/*#__PURE__*/React.createElement(\"tbody\",null,logTypeData===null||logTypeData===void 0?void 0:logTypeData.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{key:item.id},/*#__PURE__*/React.createElement(\"td\",null,getNumberByLanguage(index+1)),/*#__PURE__*/React.createElement(\"td\",null,\" \",item.component),/*#__PURE__*/React.createElement(\"td\",null,\" \",item.maintenance_date),/*#__PURE__*/React.createElement(\"td\",null,\" \",item.duration),/*#__PURE__*/React.createElement(\"td\",null,\" \",item.cost_total),/*#__PURE__*/React.createElement(\"td\",{className:\"action\"},/*#__PURE__*/React.createElement(\"div\",{role:\"button\",onClick:function onClick(){props.setEditData(item);props.toggle();}},/*#__PURE__*/React.createElement(\"img\",{src:EditIconDark,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{role:\"button\",onClick:function onClick(){return handleDeleteClick(item.id);}},/*#__PURE__*/React.createElement(\"img\",{src:DeleteIcon,alt:\"\"}))));})))),/*#__PURE__*/React.createElement(ConfirmationModal,{open:modal,handleModal:function handleModal(){return toggleModal();},handleConfirmClick:function handleConfirmClick(){return handleDelete();}}));};var mapStateToProps=function mapStateToProps(state){var _state$waterSchemeDat;return{language:state.i18nextData.languageType,schemeSlug:(_state$waterSchemeDat=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat===void 0?void 0:_state$waterSchemeDat.slug,componentInfoLogs:state.componentLogs.getComponentLogs.data};};var mapDispatchToProps={deleteComponentLogsAction:deleteComponentLogsAction,getComponentLogsAction:getComponentLogsAction,getComponentLogsByIdAction:getComponentLogsByIdAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(ManageComponentLists);","map":null,"metadata":{},"sourceType":"module"}