{"ast":null,"code":"var _jsxFileName = \"E:\\\\Smart Tech Solution\\\\React JS\\\\react-project\\\\src\\\\core\\\\Public\\\\Dashboard\\\\Dashboard.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory } from \"react-router\";\nimport PrivateRoute from \"routes/PrivateRoute/PrivateRoute\";\nimport useAuthentication from \"services/authentication/AuthenticationService\";\nimport TokenService from \"services/jwt-token/jwt-token\";\nimport { updateSchemeNameAction } from \"store/modules/schemeName\";\nimport { getSchemeYearIntervalsAction } from \"store/modules/waterScheme/getYearIntervals\";\nimport { getWaterSchemeDetailsAction } from \"store/modules/waterScheme/waterSchemeDetails\";\nimport Header from \"./Header/Header\";\nimport Sidebar from \"./Sidebar/Sidebar\";\n\nfunction Dashboard(props) {\n  _s();\n\n  const {\n    children\n  } = props;\n  const history = useHistory();\n  const [sidebarToggle, setsidebarToggle] = useState(false);\n  const {\n    isAuthenticated\n  } = useAuthentication();\n\n  const getSchemeDetails = async () => {\n    var _window$location$href;\n\n    const containsSchemeInUrl = window.location.hash.split(\"/\")[1] === \"scheme\";\n\n    if (containsSchemeInUrl) {\n      const route = window.location.hash.split(\"/\")[2];\n      const response = await props.getWaterSchemeDetailsAction(route);\n\n      if (response.data && response.status !== 400) {\n        props.updateSchemeNameAction(route);\n        props.getSchemeYearIntervalsAction(props.langauge, route);\n      } else {\n        history.replace(\"/\");\n      }\n    } else if (isAuthenticated()) {\n      const tokenData = TokenService.getAccessToken();\n      const response = await props.getWaterSchemeDetailsAction(tokenData === null || tokenData === void 0 ? void 0 : tokenData.slug);\n\n      if (response.data && response.status !== 400) {\n        props.updateSchemeNameAction(tokenData === null || tokenData === void 0 ? void 0 : tokenData.slug);\n        props.getSchemeYearIntervalsAction(props.langauge, tokenData === null || tokenData === void 0 ? void 0 : tokenData.slug);\n      }\n    } else if ((_window$location$href = window.location.href) !== null && _window$location$href !== void 0 && _window$location$href.includes(\"auth\")) {\n      history.replace(\"/login\");\n    } else {\n      history.replace(\"/\");\n    }\n  };\n\n  React.useEffect(() => {\n    if (window.location.hash && props.langauge) {\n      getSchemeDetails();\n    }\n  }, [props.langauge, window.location.hash]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `app theme-dark-blue ${sidebarToggle ? \"toggled\" : \"\"}`,\n    style: {\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    sidebarToggle: sidebarToggle,\n    setsidebarToggle: setsidebarToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    className: \"stickyHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    sidebarToggle: sidebarToggle,\n    setsidebarToggle: setsidebarToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PrivateRoute, {\n    appRoutes: children,\n    redirectPath: [{\n      to: isAuthenticated() ? \"/auth/home\" : \"/home\",\n      from: \"*\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }))));\n}\n\n_s(Dashboard, \"/16DgC3UeKHJig9GQUcGzH3uLaA=\", false, function () {\n  return [useHistory, useAuthentication];\n});\n\n_c = Dashboard;\n\nconst mapStateToProps = state => ({\n  langauge: state.i18nextData.languageType\n});\n\nconst mapDispatchToProps = {\n  getWaterSchemeDetailsAction: getWaterSchemeDetailsAction,\n  updateSchemeNameAction: updateSchemeNameAction,\n  getSchemeYearIntervalsAction: getSchemeYearIntervalsAction\n};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport default _c2 = connector(Dashboard);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Dashboard\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["E:/Smart Tech Solution/React JS/react-project/src/core/Public/Dashboard/Dashboard.tsx"],"names":["React","useState","connect","useHistory","PrivateRoute","useAuthentication","TokenService","updateSchemeNameAction","getSchemeYearIntervalsAction","getWaterSchemeDetailsAction","Header","Sidebar","Dashboard","props","children","history","sidebarToggle","setsidebarToggle","isAuthenticated","getSchemeDetails","containsSchemeInUrl","window","location","hash","split","route","response","data","status","langauge","replace","tokenData","getAccessToken","slug","href","includes","useEffect","position","to","from","mapStateToProps","state","i18nextData","languageType","mapDispatchToProps","connector"],"mappings":"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","sourcesContent":["import React, { ReactElement, useState } from \"react\";\r\nimport { connect, ConnectedProps, useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router\";\r\nimport PrivateRoute from \"routes/PrivateRoute/PrivateRoute\";\r\nimport useAuthentication from \"services/authentication/AuthenticationService\";\r\nimport TokenService from \"services/jwt-token/jwt-token\";\r\nimport { updateSchemeNameAction } from \"store/modules/schemeName\";\r\nimport { getSchemeYearIntervalsAction } from \"store/modules/waterScheme/getYearIntervals\";\r\nimport { getWaterSchemeDetailsAction } from \"store/modules/waterScheme/waterSchemeDetails\";\r\nimport { RootState } from \"store/root-reducer\";\r\nimport Header from \"./Header/Header\";\r\nimport Sidebar from \"./Sidebar/Sidebar\";\r\n\r\ninterface Props extends PropsFromRedux {\r\n  children: any;\r\n}\r\n\r\nfunction Dashboard(props: Props): ReactElement {\r\n  const { children } = props;\r\n  const history = useHistory();\r\n  const [sidebarToggle, setsidebarToggle] = useState(false);\r\n\r\n  const { isAuthenticated } = useAuthentication();\r\n\r\n  const getSchemeDetails = async () => {\r\n    const containsSchemeInUrl = window.location.hash.split(\"/\")[1] === \"scheme\";\r\n\r\n    if (containsSchemeInUrl) {\r\n      const route = window.location.hash.split(\"/\")[2];\r\n      const response = await props.getWaterSchemeDetailsAction(route);\r\n\r\n      if (response.data && response.status !== 400) {\r\n        props.updateSchemeNameAction(route);\r\n        props.getSchemeYearIntervalsAction(props.langauge, route);\r\n      } else {\r\n        history.replace(\"/\");\r\n      }\r\n    } else if (isAuthenticated()) {\r\n      const tokenData = TokenService.getAccessToken();\r\n      const response = await props.getWaterSchemeDetailsAction(tokenData?.slug);\r\n\r\n      if (response.data && response.status !== 400) {\r\n        props.updateSchemeNameAction(tokenData?.slug);\r\n        props.getSchemeYearIntervalsAction(props.langauge, tokenData?.slug);\r\n      }\r\n    } else if (window.location.href?.includes(\"auth\")) {\r\n      history.replace(\"/login\");\r\n    } else {\r\n      history.replace(\"/\");\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (window.location.hash && props.langauge) {\r\n      getSchemeDetails();\r\n    }\r\n  }, [props.langauge, window.location.hash]);\r\n\r\n  return (\r\n    <div\r\n      className={`app theme-dark-blue ${sidebarToggle ? \"toggled\" : \"\"}`}\r\n      style={{ position: \"relative\" }}\r\n    >\r\n      <Sidebar sidebarToggle={sidebarToggle} setsidebarToggle={setsidebarToggle} />\r\n      <main className=\"stickyHeader\">\r\n        <Header sidebarToggle={sidebarToggle} setsidebarToggle={setsidebarToggle} />\r\n        <div className=\"inner\">\r\n          <PrivateRoute\r\n            appRoutes={children}\r\n            redirectPath={[{ to: isAuthenticated() ? \"/auth/home\" : \"/home\", from: \"*\" }]}\r\n          />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  langauge: state.i18nextData.languageType,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getWaterSchemeDetailsAction: getWaterSchemeDetailsAction,\r\n  updateSchemeNameAction: updateSchemeNameAction,\r\n  getSchemeYearIntervalsAction: getSchemeYearIntervalsAction,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(Dashboard);\r\n"]},"metadata":{},"sourceType":"module"}