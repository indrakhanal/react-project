{"ast":null,"code":"import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import FormikValidationError from\"components/React/FormikValidationError/FormikValidationError\";import{useFormik}from\"formik\";import React from\"react\";import Button from\"components/UI/Forms/Buttons\";import{connect}from\"react-redux\";import toast from\"components/React/ToastNotifier/ToastNotifier\";import*as Yup from\"yup\";import StyledSelect from\"components/React/StyledSelect/StyledSelect\";import{postComponentAction}from\"store/modules/component/postComponent\";import{updateComponentAction}from\"store/modules/component/updateComponent\";import{getComponentAction}from\"store/modules/component/getComponent\";import{useTranslation}from\"react-i18next\";var validationSchema=Yup.object({name:Yup.string().required(\"This field is required\"),category:Yup.mixed().required(\"This field is required\")});var ComponentForm=function ComponentForm(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _React$useState=React.useState({name:\"\",category:null}),_React$useState2=_slicedToArray(_React$useState,2),initialData=_React$useState2[0],setInitialData=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),options=_React$useState4[0],setOptions=_React$useState4[1];React.useEffect(function(){if(props.componentCategories){var newOpt=props.componentCategories.map(function(item){return{label:\"\"+item.name,value:\"\"+item.id};});setOptions(newOpt);}},[props.componentCategories]);var _useFormik=useFormik({enableReinitialize:true,initialValues:initialData,validationSchema:validationSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var resetForm,response,_values$category,_values$category2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:resetForm=_ref.resetForm;if(!props.editData){_context.next=7;break;}_context.next=4;return props.updateComponentAction(props.editData.id,_objectSpread(_objectSpread({},values),{},{category:(_values$category=values.category)===null||_values$category===void 0?void 0:_values$category.value}));case 4:response=_context.sent;_context.next=10;break;case 7:_context.next=9;return props.postComponentAction(_objectSpread(_objectSpread({},values),{},{category:(_values$category2=values.category)===null||_values$category2===void 0?void 0:_values$category2.value}));case 9:response=_context.sent;case 10:if(response.status===201||response.status===200){if(response.status===201){resetForm();toast.success(t(\"home:postSuccess\"));props.getComponentAction();}else{setInitialData({name:\"\",category:null});props.getComponentAction();toast.success(t(\"home:updateSuccess\"));}props.setEditData(null);}case 11:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()}),values=_useFormik.values,errors=_useFormik.errors,touched=_useFormik.touched,setFieldTouched=_useFormik.setFieldTouched,setFieldValue=_useFormik.setFieldValue,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,handleSubmit=_useFormik.handleSubmit;React.useEffect(function(){if(props.editData){var _props$editData,_props$editData$categ,_props$editData2,_props$editData2$cate;setInitialData(_objectSpread(_objectSpread({},props.editData),{},{category:{label:(_props$editData=props.editData)===null||_props$editData===void 0?void 0:(_props$editData$categ=_props$editData.category)===null||_props$editData$categ===void 0?void 0:_props$editData$categ.name,value:(_props$editData2=props.editData)===null||_props$editData2===void 0?void 0:(_props$editData2$cate=_props$editData2.category)===null||_props$editData2$cate===void 0?void 0:_props$editData2$cate.id}}));}},[props.editData]);console.log(props.editData,\"props.editData\");return/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();handleSubmit(e);}},/*#__PURE__*/React.createElement(\"div\",{className:\"row rate_form align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"maintainance:category\"),\":\"),/*#__PURE__*/React.createElement(StyledSelect,{name:\"category\",options:options,value:values.category,onChange:function onChange(_ref2){var name=_ref2.name,value=_ref2.value;setFieldValue(name,value);},onBlur:function onBlur(){setFieldTouched(\"category\",true);}}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"category\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"home:name\"),\" :\"),/*#__PURE__*/React.createElement(\"textarea\",{className:\"form-control\",name:\"name\",value:values.name,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"name\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mt-2 text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"btn custom-btn\",text:t(\"home:save\"),type:\"submit\",disabled:props.postLoading||props.updateLoading,loading:props.postLoading||props.updateLoading}))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,componentCategories:state.componentCategories.getComponentCategories.data,postLoading:state.component.postComponent.isFetching,updateLoading:state.component.updateComponent.isFetching};};var mapDispatchToProps={postComponentAction:postComponentAction,updateComponentAction:updateComponentAction,getComponentAction:getComponentAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(ComponentForm);","map":null,"metadata":{},"sourceType":"module"}