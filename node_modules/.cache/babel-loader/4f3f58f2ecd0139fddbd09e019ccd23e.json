{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{CameraIcon}from\"assets/images/xd\";import{ADToBS}from\"components/React/Datepicker/Datepickerutils\";import GeneralModal from\"components/UI/GeneralModal\";import Slider from\"components/UI/Slider\";import{getMonthByLanguageAndScheme}from\"i18n/i18n\";import React,{useEffect,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import{Table}from\"reactstrap\";import{getIncomeAction}from\"store/modules/income/getIcome\";import{getIncomeCategoryAction}from\"store/modules/income/getIncomeCategory\";import{getIncomeExpenseImageAction}from\"store/modules/income/getIncomeExpenseImgae\";import{getPreviousIncomeTotalAction}from\"store/modules/income/getPreviousIncomeTotal\";import{getDefaultDate}from\"utils/utilsFunction/date-converter\";import{sortAplabetically}from\"utils/utilsFunction/sorting\";var CashbookTable=function CashbookTable(props){var _sortAplabetically,_sortAplabetically2,_sortAplabetically4,_props$sliderImages,_props$activeDate5,_props$schemeDetails4;var _useTranslation=useTranslation([\"cashbook\"]),t=_useTranslation.t;var incomeData=props.incomeData,incomeCategories=props.incomeCategories,language=props.language,schemeSlug=props.schemeSlug,schemeDetails=props.schemeDetails,previousIncomeTotal=props.previousIncomeTotal,incomeExpenseImage=props.incomeExpenseImage,getIncomeAction=props.getIncomeAction,getIncomeCategoryAction=props.getIncomeCategoryAction,getPreviousIncomeTotalAction=props.getPreviousIncomeTotalAction,getIncomeExpenseImageAction=props.getIncomeExpenseImageAction;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var toggle=function toggle(){return setModal(!modal);};console.log(props.activeDate,\"props.activeDateprops.activeDate\");useEffect(function(){if(language&&schemeSlug&&schemeDetails&&props.activeTab&&props.activeDate){if(props.activeTab===\"1\"){var _props$activeDate,_getDefaultDate,_props$activeDate2,_getDefaultDate2,_props$activeDate3,_getDefaultDate3,_props$activeDate4,_getDefaultDate4;getIncomeAction(language,schemeSlug,((_props$activeDate=props.activeDate)===null||_props$activeDate===void 0?void 0:_props$activeDate.split(\"-\")[0])||((_getDefaultDate=getDefaultDate(schemeDetails===null||schemeDetails===void 0?void 0:schemeDetails.system_date_format))===null||_getDefaultDate===void 0?void 0:_getDefaultDate.split(\"-\")[0]),((_props$activeDate2=props.activeDate)===null||_props$activeDate2===void 0?void 0:_props$activeDate2.split(\"-\")[1])||((_getDefaultDate2=getDefaultDate(schemeDetails===null||schemeDetails===void 0?void 0:schemeDetails.system_date_format))===null||_getDefaultDate2===void 0?void 0:_getDefaultDate2.split(\"-\")[1]));getIncomeCategoryAction(schemeSlug);getPreviousIncomeTotalAction(language,schemeSlug,((_props$activeDate3=props.activeDate)===null||_props$activeDate3===void 0?void 0:_props$activeDate3.split(\"-\")[0])||((_getDefaultDate3=getDefaultDate(schemeDetails===null||schemeDetails===void 0?void 0:schemeDetails.system_date_format))===null||_getDefaultDate3===void 0?void 0:_getDefaultDate3.split(\"-\")[0]),((_props$activeDate4=props.activeDate)===null||_props$activeDate4===void 0?void 0:_props$activeDate4.split(\"-\")[1])||((_getDefaultDate4=getDefaultDate(schemeDetails===null||schemeDetails===void 0?void 0:schemeDetails.system_date_format))===null||_getDefaultDate4===void 0?void 0:_getDefaultDate4.split(\"-\")[1]));getIncomeExpenseImageAction(language,schemeSlug,props.activeDate||ADToBS(new Date()));}}},[language,props.activeDate,schemeSlug,schemeDetails,props.activeTab]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Table,{className:\"table-02 table-hover\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,t(\"cashbook:date\")),/*#__PURE__*/React.createElement(\"th\",null,t(\"cashbook:description\")),(_sortAplabetically=sortAplabetically(incomeCategories,\"name\"))===null||_sortAplabetically===void 0?void 0:_sortAplabetically.map(function(incomeCategory,index){return/*#__PURE__*/React.createElement(\"th\",{key:index},incomeCategory.name);}))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,t(\"cashbook:from-prev-month\")),(_sortAplabetically2=sortAplabetically(incomeCategories,\"name\"))===null||_sortAplabetically2===void 0?void 0:_sortAplabetically2.map(function(incomeCategory,index){var _previousIncomeTotal$;var findData=previousIncomeTotal===null||previousIncomeTotal===void 0?void 0:(_previousIncomeTotal$=previousIncomeTotal.previous_month_data)===null||_previousIncomeTotal$===void 0?void 0:_previousIncomeTotal$.find(function(prev){return prev.income_category_name===incomeCategory.name;});if(findData){var _props$schemeDetails;return/*#__PURE__*/React.createElement(\"td\",{key:index},(_props$schemeDetails=props.schemeDetails)===null||_props$schemeDetails===void 0?void 0:_props$schemeDetails.currency,\" \",findData.total_income_amount);}else{return/*#__PURE__*/React.createElement(\"td\",{key:index},\"-\");}})),incomeData===null||incomeData===void 0?void 0:incomeData.map(function(income,index){var _sortAplabetically3;return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"td\",null,language===\"en\"?income.date:income.date_np),/*#__PURE__*/React.createElement(\"td\",null,income.title),(_sortAplabetically3=sortAplabetically(incomeCategories,\"name\"))===null||_sortAplabetically3===void 0?void 0:_sortAplabetically3.map(function(incomeCategory,index){if(income.category.name===incomeCategory.name){var _props$schemeDetails2;return/*#__PURE__*/React.createElement(\"td\",{key:index},(_props$schemeDetails2=props.schemeDetails)===null||_props$schemeDetails2===void 0?void 0:_props$schemeDetails2.currency,\" \",income.income_amount);}else{return/*#__PURE__*/React.createElement(\"td\",{key:index},\"-\");}}));}),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null),/*#__PURE__*/React.createElement(\"td\",null,t(\"cashbook:total\")),(_sortAplabetically4=sortAplabetically(incomeCategories,\"name\"))===null||_sortAplabetically4===void 0?void 0:_sortAplabetically4.map(function(incomeCategory,index){var _previousIncomeTotal$2;var findData=previousIncomeTotal===null||previousIncomeTotal===void 0?void 0:(_previousIncomeTotal$2=previousIncomeTotal.present_month_data)===null||_previousIncomeTotal$2===void 0?void 0:_previousIncomeTotal$2.find(function(prev){return prev.income_category_name===incomeCategory.name;});if(findData){var _props$schemeDetails3;return/*#__PURE__*/React.createElement(\"td\",{key:index},(_props$schemeDetails3=props.schemeDetails)===null||_props$schemeDetails3===void 0?void 0:_props$schemeDetails3.currency,\" \",findData.total_income_amount);}else{return/*#__PURE__*/React.createElement(\"td\",{key:index},\"-\");}})),props.sliderImages&&props.sliderImages instanceof Array&&((_props$sliderImages=props.sliderImages)===null||_props$sliderImages===void 0?void 0:_props$sliderImages.length)>0&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{role:\"button\",onClick:function onClick(){return setModal(true);}},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"img\",{src:CameraIcon,alt:\"\"}),\" \\xA0\\xA0 Paper Cashbook Image -\",\" \",getMonthByLanguageAndScheme((_props$activeDate5=props.activeDate)===null||_props$activeDate5===void 0?void 0:_props$activeDate5.split(\"-\")[1],(_props$schemeDetails4=props.schemeDetails)===null||_props$schemeDetails4===void 0?void 0:_props$schemeDetails4.system_date_format)))))),/*#__PURE__*/React.createElement(GeneralModal,{open:modal,toggle:toggle},/*#__PURE__*/React.createElement(Slider,null))));};var mapStateToProps=function mapStateToProps(state){var _state$waterSchemeDat;return{language:state.i18nextData.languageType,sliderImages:state.incomeData.getIncomeExpenseImgae.data,schemeSlug:(_state$waterSchemeDat=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat===void 0?void 0:_state$waterSchemeDat.slug,schemeDetails:state.waterSchemeData.waterSchemeDetailsData.data,incomeData:state.incomeData.getIncomeData.data,incomeCategories:state.incomeData.getIncomeCategory.data,previousIncomeTotal:state.incomeData.getPreviousIncomeTotal.data,incomeExpenseImage:state.incomeData.getIncomeExpenseImgae.data};};var mapDispatchToProps={getIncomeAction:getIncomeAction,getIncomeCategoryAction:getIncomeCategoryAction,getPreviousIncomeTotalAction:getPreviousIncomeTotalAction,getIncomeExpenseImageAction:getIncomeExpenseImageAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(CashbookTable);","map":null,"metadata":{},"sourceType":"module"}