{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GeneralChart from\"components/UI/Charts/General\";import{getFiscalYearData,getMonthByLanguageAndScheme,getNumberByLanguage}from\"i18n/i18n\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import IncomeExpendTable from\"./IncomeExpendTable\";import{useTranslation}from\"react-i18next\";var IncomeExpendGraphThisYear=function IncomeExpendGraphThisYear(props){var incomeExpenseData=props.incomeExpenseData;var _useTranslation=useTranslation([\"home\"]),t=_useTranslation.t;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),months=_useState2[0],setMonths=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),income=_useState4[0],setIncome=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),expense=_useState6[0],setExpense=_useState6[1];useEffect(function(){if(incomeExpenseData&&props.intervalData){var _props$schemeDetails;var fiscalYearArray=getFiscalYearData(props.intervalData,(_props$schemeDetails=props.schemeDetails)===null||_props$schemeDetails===void 0?void 0:_props$schemeDetails.system_date_format);var yearArray=fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _props$schemeDetails2;return getMonthByLanguageAndScheme(item,(_props$schemeDetails2=props.schemeDetails)===null||_props$schemeDetails2===void 0?void 0:_props$schemeDetails2.system_date_format);});var incomeArray=fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _incomeExpenseData$in,_incomeExpenseData$in2;return((_incomeExpenseData$in=incomeExpenseData.income)===null||_incomeExpenseData$in===void 0?void 0:(_incomeExpenseData$in2=_incomeExpenseData$in.find(function(inc){var _inc$date__month,_inc$date__month$toSt;return+inc.date__month<10?+((_inc$date__month=inc.date__month)===null||_inc$date__month===void 0?void 0:(_inc$date__month$toSt=_inc$date__month.toString())===null||_inc$date__month$toSt===void 0?void 0:_inc$date__month$toSt.replace(\"0\",\"\"))===item:+inc.date__month===item;}))===null||_incomeExpenseData$in2===void 0?void 0:_incomeExpenseData$in2.total_amount)||0;});var expenseArray=fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _incomeExpenseData$ex,_incomeExpenseData$ex2;return((_incomeExpenseData$ex=incomeExpenseData.expense)===null||_incomeExpenseData$ex===void 0?void 0:(_incomeExpenseData$ex2=_incomeExpenseData$ex.find(function(inc){var _inc$date__month2,_inc$date__month2$toS;return+inc.date__month<10?+((_inc$date__month2=inc.date__month)===null||_inc$date__month2===void 0?void 0:(_inc$date__month2$toS=_inc$date__month2.toString())===null||_inc$date__month2$toS===void 0?void 0:_inc$date__month2$toS.replace(\"0\",\"\"))===item:+inc.date__month===item;}))===null||_incomeExpenseData$ex2===void 0?void 0:_incomeExpenseData$ex2.total_amount)||0;});setMonths(yearArray);setIncome(incomeArray||[]);setExpense(expenseArray||[]);}},[incomeExpenseData,props.intervalData]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(GeneralChart,{minHeight:350,options:{tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}// formatter: handleCustomTooltip,\n},legend:{show:false},grid:{left:\"3%\",right:\"4%\",bottom:\"3%\",top:\"8%\",containLabel:true},xAxis:{type:\"category\",boundaryGap:false,data:months,axisLabel:{formatter:function formatter(name){return(name===null||name===void 0?void 0:name.replace(\"Year\",\"\"))||\"\";}}},yAxis:{type:\"value\",axisLabel:{formatter:function formatter(name){return getNumberByLanguage(name);}}},series:[{name:\"\".concat(t(\"home:total\"),\" \").concat(t(\"home:income\"),\" \"),type:\"line\",smooth:true,data:income,lineStyle:{color:\"#4DFFFF\"}},{name:\"\".concat(t(\"home:total\"),\" \").concat(t(\"home:expense\"),\" \"),type:\"line\",smooth:true,data:expense,lineStyle:{color:\"#ff4D4D\"}}]}}),/*#__PURE__*/React.createElement(IncomeExpendTable,{months:true,heading:months,income:income,expense:expense}));};var mapStateToProps=function mapStateToProps(state){return{schemeDetails:state.waterSchemeData.waterSchemeDetailsData.data,incomeExpenseData:state.reportData.incomeExpenseData.data,intervalData:state.waterSchemeData.getYearIntervals.data};};var mapDispatchToProps={};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(IncomeExpendGraphThisYear);","map":null,"metadata":{},"sourceType":"module"}