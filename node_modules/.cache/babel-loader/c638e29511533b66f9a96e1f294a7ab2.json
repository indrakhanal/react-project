{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\src\\\\core\\\\Public\\\\Maintainance\\\\AssetComponent\\\\AssetTable\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport { getDashboardComponentInfoAction } from \"store/modules/maintainance/dashboardComponentInfo\";\nimport CostDataHeader, { CostData } from \"./Components/CostData\";\nimport NormalDataHeader, { NormalData } from \"./Components/NormalData\";\nimport RiskDataHeader, { RiskData } from \"./Components/RiskData\";\nimport Thumbnail from \"assets/images/thumbnail.png\";\nimport { SRLWrapper } from \"simple-react-lightbox\";\n\nconst AssetTable = props => {\n  _s();\n\n  const {\n    t\n  } = useTranslation([\"maintainance\"]);\n  const [showRisk, setShowRisk] = React.useState(false);\n  const [showCost, setShowCost] = React.useState(false);\n  const [tableData, setTableData] = React.useState(null);\n  React.useEffect(() => {\n    if (props.schemeSlug) {\n      props.getDashboardComponentInfoAction(props.language, props.schemeSlug);\n    }\n  }, [props.language, props.schemeSlug]);\n  React.useEffect(() => {\n    if (props.componentData) {\n      var _props$componentData;\n\n      const newGroupedData = {};\n      (_props$componentData = props.componentData) === null || _props$componentData === void 0 ? void 0 : _props$componentData.forEach(data => {\n        if (data.component.category.name in newGroupedData) {\n          newGroupedData[data.component.category.name].push(data);\n        } else {\n          newGroupedData[data.component.category.name] = [data];\n        }\n      });\n      setTableData(newGroupedData);\n    }\n  }, [props.componentData]);\n  console.log(tableData, \"newGroupedData\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"tabular\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table-02\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    colSpan: 5,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: showRisk || showCost ? \"placeholder\" : \"top-headers\",\n    colSpan: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  }, !showRisk && !showCost && t(\"maintainance:mitigation\")), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: showRisk || showCost ? \"placeholder\" : \"top-headers\",\n    colSpan: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, !showRisk && !showCost && t(\"maintainance:responsible\")))), /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"bg-header\",\n    style: {\n      width: 400\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, t(\"maintainance:assetComponent\")), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"bg-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, t(\"maintainance:dopf\")), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"bg-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, t(\"maintainance:lifespan\")), showCost ? /*#__PURE__*/React.createElement(CostDataHeader, {\n    onClick: () => setShowCost(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }) : showRisk ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(RiskDataHeader, {\n    onClick: () => setShowRisk(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  })) : /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    rowSpan: 2,\n    className: \"expand-header risk-tab\",\n    role: \"button\",\n    onClick: () => setShowRisk(!showRisk),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pill\",\n    role: \"button\",\n    onClick: () => setShowRisk(!showRisk),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, t(\"maintainance:risk\")), t(\"maintainance:click\")), showRisk || showCost ? /*#__PURE__*/React.createElement(React.Fragment, null) : /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    rowSpan: 2,\n    className: \"expand-header  cost-tab\",\n    role: \"button\",\n    onClick: () => setShowCost(!showCost),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pill\",\n    role: \"button\",\n    onClick: () => setShowCost(!showCost),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }\n  }, t(\"maintainance:cost\")), t(\"maintainance:click\")), showRisk || (showCost ? /*#__PURE__*/React.createElement(React.Fragment, null) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NormalDataHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  })))), tableData && Object.entries(tableData).map(item => {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: showCost ? 8 : 3,\n      className: \"component-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, item[0]), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    })), item[1] instanceof Array && item[1].map(data => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"component-image-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(SRLWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: data.componant_picture || Thumbnail,\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 33\n      }\n    }))), data.component.name)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 25\n      }\n    }, data.possible_failure), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 25\n      }\n    }, data.maintenance_interval, \" \", data.interval_unit), !showRisk && /*#__PURE__*/React.createElement(\"td\", {\n      className: `\n                        ${data.resulting_risk_score <= 4 ? \"bg-green\" : data.resulting_risk_score <= 8 ? \"bg-yellow\" : data.resulting_risk_score <= 12 ? \"bg-orange\" : \"bg-red\"}\n                        `,\n      role: \"button\",\n      onClick: () => setShowRisk(!showRisk),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 27\n      }\n    }, data.resulting_risk_score), showRisk || showCost ? /*#__PURE__*/React.createElement(React.Fragment, null) : /*#__PURE__*/React.createElement(\"td\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 27\n      }\n    }, props.currency, \" \", data.seggregated_or_unseggregated_cost), showRisk || showCost ? /*#__PURE__*/React.createElement(React.Fragment, null, showCost ? /*#__PURE__*/React.createElement(CostData, {\n      data: data,\n      currency: props.currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 31\n      }\n    }) : showRisk ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(RiskData, {\n      data: data,\n      onClick: () => setShowRisk(false),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 33\n      }\n    })) : /*#__PURE__*/React.createElement(React.Fragment, null)) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(NormalData, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    })))));\n  }))));\n};\n\n_s(AssetTable, \"OdamYxBgy+65w1KdXGloua4rvVg=\", false, function () {\n  return [useTranslation];\n});\n\n_c = AssetTable;\n\nconst mapStateToProps = state => {\n  var _state$waterSchemeDat, _state$waterSchemeDat2;\n\n  return {\n    language: state.i18nextData.languageType,\n    schemeSlug: (_state$waterSchemeDat = state.waterSchemeData.waterSchemeDetailsData.data) === null || _state$waterSchemeDat === void 0 ? void 0 : _state$waterSchemeDat.slug,\n    currency: (_state$waterSchemeDat2 = state.waterSchemeData.waterSchemeDetailsData.data) === null || _state$waterSchemeDat2 === void 0 ? void 0 : _state$waterSchemeDat2.currency,\n    componentData: state.maintainanceData.dashboardComponentInfoData.data\n  };\n};\n\nconst mapDispatchToProps = {\n  getDashboardComponentInfoAction: getDashboardComponentInfoAction\n};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport default _c2 = connector(AssetTable);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AssetTable\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/src/core/Public/Maintainance/AssetComponent/AssetTable/index.tsx"],"names":["React","useTranslation","connect","getDashboardComponentInfoAction","CostDataHeader","CostData","NormalDataHeader","NormalData","RiskDataHeader","RiskData","Thumbnail","SRLWrapper","AssetTable","props","t","showRisk","setShowRisk","useState","showCost","setShowCost","tableData","setTableData","useEffect","schemeSlug","language","componentData","newGroupedData","forEach","data","component","category","name","push","console","log","width","Object","entries","map","item","Array","componant_picture","possible_failure","maintenance_interval","interval_unit","resulting_risk_score","currency","seggregated_or_unseggregated_cost","mapStateToProps","state","i18nextData","languageType","waterSchemeData","waterSchemeDetailsData","slug","maintainanceData","dashboardComponentInfoData","mapDispatchToProps","connector"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport {\r\n  DashboardComponentInfoType,\r\n  getDashboardComponentInfoAction,\r\n} from \"store/modules/maintainance/dashboardComponentInfo\";\r\nimport { RootState } from \"store/root-reducer\";\r\nimport CostDataHeader, { CostData } from \"./Components/CostData\";\r\nimport NormalDataHeader, { NormalData } from \"./Components/NormalData\";\r\nimport RiskDataHeader, { RiskData } from \"./Components/RiskData\";\r\nimport Thumbnail from \"assets/images/thumbnail.png\";\r\nimport { SRLWrapper } from \"simple-react-lightbox\";\r\n\r\ninterface IProps extends PropsFromRedux {}\r\n\r\nconst AssetTable = (props: IProps) => {\r\n  const { t } = useTranslation([\"maintainance\"]);\r\n\r\n  const [showRisk, setShowRisk] = React.useState(false);\r\n  const [showCost, setShowCost] = React.useState(false);\r\n\r\n  const [tableData, setTableData] = React.useState<any>(null);\r\n\r\n  React.useEffect(() => {\r\n    if (props.schemeSlug) {\r\n      props.getDashboardComponentInfoAction(props.language, props.schemeSlug);\r\n    }\r\n  }, [props.language, props.schemeSlug]);\r\n\r\n  React.useEffect(() => {\r\n    if (props.componentData) {\r\n      const newGroupedData: any = {};\r\n\r\n      props.componentData?.forEach((data) => {\r\n        if (data.component.category.name in newGroupedData) {\r\n          newGroupedData[data.component.category.name].push(data);\r\n        } else {\r\n          newGroupedData[data.component.category.name] = [data];\r\n        }\r\n      });\r\n      setTableData(newGroupedData);\r\n    }\r\n  }, [props.componentData]);\r\n\r\n  console.log(tableData, \"newGroupedData\");\r\n  return (\r\n    <div className=\"tabular\">\r\n      <table className=\"table-02\">\r\n        <tbody>\r\n          <>\r\n            <tr className=\"\">\r\n              <th scope=\"col\" colSpan={5}></th>\r\n              <th\r\n                scope=\"col\"\r\n                className={showRisk || showCost ? \"placeholder\" : \"top-headers\"}\r\n                colSpan={3}\r\n              >\r\n                {!showRisk && !showCost && t(\"maintainance:mitigation\")}\r\n              </th>\r\n              <th\r\n                scope=\"col\"\r\n                className={showRisk || showCost ? \"placeholder\" : \"top-headers\"}\r\n                colSpan={3}\r\n              >\r\n                {!showRisk && !showCost && t(\"maintainance:responsible\")}\r\n              </th>\r\n            </tr>\r\n          </>\r\n\r\n          <tr className=\"header\">\r\n            <th scope=\"col\" className=\"bg-header\" style={{ width: 400 }}>\r\n              {t(\"maintainance:assetComponent\")}\r\n            </th>\r\n            <th scope=\"col\" className=\"bg-header\">\r\n              {t(\"maintainance:dopf\")}\r\n            </th>\r\n            <th scope=\"col\" className=\"bg-header\">\r\n              {t(\"maintainance:lifespan\")}\r\n            </th>\r\n\r\n            {showCost ? (\r\n              <CostDataHeader onClick={() => setShowCost(false)} />\r\n            ) : showRisk ? (\r\n              <>\r\n                <RiskDataHeader onClick={() => setShowRisk(false)} />\r\n              </>\r\n            ) : (\r\n              <th\r\n                scope=\"col\"\r\n                rowSpan={2}\r\n                className=\"expand-header risk-tab\"\r\n                role=\"button\"\r\n                onClick={() => setShowRisk(!showRisk)}\r\n              >\r\n                <span className=\"pill\" role=\"button\" onClick={() => setShowRisk(!showRisk)}>\r\n                  {t(\"maintainance:risk\")}\r\n                </span>\r\n                {t(\"maintainance:click\")}\r\n              </th>\r\n            )}\r\n\r\n            {showRisk || showCost ? (\r\n              <></>\r\n            ) : (\r\n              <th\r\n                scope=\"col\"\r\n                rowSpan={2}\r\n                className=\"expand-header  cost-tab\"\r\n                role=\"button\"\r\n                onClick={() => setShowCost(!showCost)}\r\n              >\r\n                <span className=\"pill\" role=\"button\" onClick={() => setShowCost(!showCost)}>\r\n                  {t(\"maintainance:cost\")}\r\n                </span>\r\n                {t(\"maintainance:click\")}\r\n              </th>\r\n            )}\r\n\r\n            {showRisk ||\r\n              (showCost ? (\r\n                <></>\r\n              ) : (\r\n                <>\r\n                  <NormalDataHeader />\r\n                </>\r\n              ))}\r\n          </tr>\r\n\r\n          {tableData &&\r\n            Object.entries(tableData).map((item) => {\r\n              return (\r\n                <React.Fragment>\r\n                  <tr>\r\n                    <td colSpan={showCost ? 8 : 3} className=\"component-title\">\r\n                      {item[0]}\r\n                    </td>\r\n                    <td></td>\r\n                  </tr>\r\n                  {item[1] instanceof Array &&\r\n                    item[1].map((data: DashboardComponentInfoType) => (\r\n                      <tr>\r\n                        <td>\r\n                          <div className=\"d-flex\">\r\n                            <div className=\"component-image-wrapper\">\r\n                              <SRLWrapper>\r\n                                <img src={data.componant_picture || Thumbnail} alt=\"\" />\r\n                              </SRLWrapper>\r\n                            </div>\r\n                            {data.component.name}\r\n                          </div>\r\n                        </td>\r\n                        <td>{data.possible_failure}</td>\r\n                        <td>{data.maintenance_interval} {data.interval_unit}</td>\r\n                        {!showRisk && (\r\n                          <td\r\n                            className={`\r\n                        ${\r\n                          data.resulting_risk_score <= 4\r\n                            ? \"bg-green\"\r\n                            : data.resulting_risk_score <= 8\r\n                            ? \"bg-yellow\"\r\n                            : data.resulting_risk_score <= 12\r\n                            ? \"bg-orange\"\r\n                            : \"bg-red\"\r\n                        }\r\n                        `}\r\n                            role=\"button\"\r\n                            onClick={() => setShowRisk(!showRisk)}\r\n                          >\r\n                            {data.resulting_risk_score}\r\n                          </td>\r\n                        )}\r\n                        {showRisk || showCost ? (\r\n                          <></>\r\n                        ) : (\r\n                          <td className=\"text-center\">\r\n                            {props.currency} {data.seggregated_or_unseggregated_cost}\r\n                          </td>\r\n                        )}\r\n                        {showRisk || showCost ? (\r\n                          <>\r\n                            {showCost ? (\r\n                              <CostData data={data} currency={props.currency} />\r\n                            ) : showRisk ? (\r\n                              <>\r\n                                <RiskData data={data} onClick={() => setShowRisk(false)} />\r\n                              </>\r\n                            ) : (\r\n                              <></>\r\n                            )}\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <NormalData data={data} />\r\n                          </>\r\n                        )}\r\n                      </tr>\r\n                    ))}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  language: state.i18nextData.languageType,\r\n  schemeSlug: state.waterSchemeData.waterSchemeDetailsData.data?.slug,\r\n  currency: state.waterSchemeData.waterSchemeDetailsData.data?.currency,\r\n  componentData: state.maintainanceData.dashboardComponentInfoData.data,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getDashboardComponentInfoAction: getDashboardComponentInfoAction,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(AssetTable);\r\n"]},"metadata":{},"sourceType":"module"}