{"ast":null,"code":"import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import FormikValidationError from\"components/React/FormikValidationError/FormikValidationError\";import{useFormik}from\"formik\";import React from\"react\";import Button from\"components/UI/Forms/Buttons\";import{connect}from\"react-redux\";import{postOtherExpensesAction}from\"store/modules/otherExpenses/postOtherExpenses\";import toast from\"components/React/ToastNotifier/ToastNotifier\";import{updateOtherExpensesAction}from\"store/modules/otherExpenses/updateOtherExpenses\";import{getOtherExpensesAction}from\"store/modules/otherExpenses/getOtherExpenses\";import*as Yup from\"yup\";import{useTranslation}from\"react-i18next\";import NepaliDatePicker from\"components/React/Datepicker/Datepicker\";import formatDate from\"utils/utilsFunction/date-converter\";import EnglishDatePicker from\"components/React/EnglishDatepicker/EnglishDatepicker\";import StyledSelect from\"components/React/StyledSelect/StyledSelect\";import{EXPENSE_CATTEGORY}from\"constants/constants\";import CustomRadio from\"components/UI/CustomRadio\";import TooltipLabel from\"components/UI/TooltipLabel\";var validationSchema=Yup.object({apply_date:Yup.string().required(\"This field is required\"),title:Yup.string().required(\"This field is required\"),yearly_expense:Yup.string().required(\"This field is required\"),category:Yup.string().required(\"This field is required\"),apply_for_specific_date:Yup.boolean().required(\"This field is required\")});var OtherExpenseForm=function OtherExpenseForm(props){var _props$scheme;var _useTranslation=useTranslation(),t=_useTranslation.t;var _React$useState=React.useState({apply_date:\"\",category:\"\",title:\"\",yearly_expense:\"\",apply_for_specific_date:true,one_time_cost:true}),_React$useState2=_slicedToArray(_React$useState,2),initialData=_React$useState2[0],setInitialData=_React$useState2[1];var _useFormik=useFormik({enableReinitialize:true,initialValues:initialData,validationSchema:validationSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var resetForm,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:resetForm=_ref.resetForm;if(!props.editData){_context.next=7;break;}_context.next=4;return props.updateOtherExpensesAction(props.language,props.editData.id,values);case 4:response=_context.sent;_context.next=10;break;case 7:_context.next=9;return props.postOtherExpensesAction(props.language,values);case 9:response=_context.sent;case 10:if(response.status===201||response.status===200){if(response.status===201){resetForm();toast.success(t(\"home:postSuccess\"));props.getOtherExpensesAction(props.language);}else{setInitialData({apply_date:\"\",category:\"\",title:\"\",yearly_expense:\"\",apply_for_specific_date:true,one_time_cost:true});props.getOtherExpensesAction(props.language);toast.success(t(\"home:updateSuccess\"));}}case 11:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()}),values=_useFormik.values,errors=_useFormik.errors,touched=_useFormik.touched,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,handleSubmit=_useFormik.handleSubmit,setFieldValue=_useFormik.setFieldValue,setFieldTouched=_useFormik.setFieldTouched;React.useEffect(function(){if(props.editData){setInitialData(_objectSpread({},props.editData));}},[props.editData]);return/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();handleSubmit(e);}},/*#__PURE__*/React.createElement(\"div\",{className:\"row rate_form align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:applyDate\"),\" \",/*#__PURE__*/React.createElement(TooltipLabel,{id:\"apd\",text:\"The date from which this record  should be applied to the system.\"}),\":\"),((_props$scheme=props.scheme)===null||_props$scheme===void 0?void 0:_props$scheme.system_date_format)===\"nep\"?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NepaliDatePicker,{value:values.apply_date,name:\"apply_date\",onChange:function onChange(e){setFieldValue(\"apply_date\",e);}})):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(EnglishDatePicker,{name:\"apply_date\",value:values.apply_date,handleChange:function handleChange(e){setFieldValue(\"apply_date\",formatDate(e));}})),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"date\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group \"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:expenseHeading\"),\" :\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",name:\"title\",value:values.title,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"title\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:yearlyExpnd\"),\" :\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",name:\"yearly_expense\",type:\"number\",value:values.yearly_expense,onChange:handleChange,onBlur:handleBlur}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"yearly_expense\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:transactionType\"),\" :\"),/*#__PURE__*/React.createElement(StyledSelect,{name:\"category\",value:(EXPENSE_CATTEGORY===null||EXPENSE_CATTEGORY===void 0?void 0:EXPENSE_CATTEGORY.find(function(item){return item.value===values.category;}))||null,options:EXPENSE_CATTEGORY,onChange:function onChange(_ref2){var name=_ref2.name,value=_ref2.value;setFieldValue(name,value===null||value===void 0?void 0:value.value);}}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"yearly_expense\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:afsd\"),\" :\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mr-2\"},/*#__PURE__*/React.createElement(CustomRadio,{label:\"Yes\",id:\"yes\",name:\"apply_for_specific_date\",value:1,checked:values.apply_for_specific_date===true,onChange:function onChange(e){return setFieldValue(\"apply_for_specific_date\",true);},tooltipData:\"If yes, the transaction will not be distributed for months\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2\"},/*#__PURE__*/React.createElement(CustomRadio,{label:\"No\",id:\"no\",name:\"apply_for_specific_date\",value:2,checked:values.apply_for_specific_date===false,onChange:function onChange(e){return setFieldValue(\"apply_for_specific_date\",false);},tooltipData:\"If no, the transaction will be distributed every months\"}))),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"yearly_expense\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:oneTimeCost\"),\" :\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mr-2\"},/*#__PURE__*/React.createElement(CustomRadio,{label:\"Yes\",id:\"yesOTC\",name:\"one_time_cost\",value:1,checked:values.one_time_cost===true,onChange:function onChange(e){return setFieldValue(\"one_time_cost\",true);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2\"},/*#__PURE__*/React.createElement(CustomRadio,{label:\"No\",id:\"noOTC\",name:\"one_time_cost\",value:2,checked:values.one_time_cost===false,onChange:function onChange(e){return setFieldValue(\"one_time_cost\",false);}}))),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"yearly_expense\",errors:errors,touched:touched}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mt-2 text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"btn custom-btn\",text:t(\"home:save\"),type:\"submit\",disabled:props.postLoading||props.updateLoading,loading:props.postLoading||props.updateLoading}))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,scheme:state.waterSchemeData.waterSchemeDetailsData.data,postLoading:state.otherExpensesData.postTestParameters.isFetching,updateLoading:state.otherExpensesData.updateTestParameters.isFetching};};var mapDispatchToProps={postOtherExpensesAction:postOtherExpensesAction,updateOtherExpensesAction:updateOtherExpensesAction,getOtherExpensesAction:getOtherExpensesAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(OtherExpenseForm);","map":null,"metadata":{},"sourceType":"module"}