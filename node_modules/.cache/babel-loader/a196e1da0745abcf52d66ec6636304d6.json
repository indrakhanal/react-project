{"ast":null,"code":"import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GeneralChart from\"components/UI/Charts/General\";import CustomCheckBox from\"components/UI/CustomCheckbox\";import{getMonthByLanguageAndScheme,getNumberByLanguage}from\"i18n/i18n\";import React,{useEffect,useState}from\"react\";import{connect}from\"react-redux\";import{chartConfig}from\"./configData\";var LineChart=function LineChart(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),testParams=_useState2[0],setTestParams=_useState2[1];var _useState3=useState(props.defaultSelected),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),chartData=_useState6[0],setChartData=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),seriesData=_useState8[0],setSeriesData=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),otherSeriesData=_useState10[0],setOtherSeriesData=_useState10[1];// const [tableData, setTableData] = useState<any>();\nuseEffect(function(){if(props.testParams){var params={chemical:props.testParams.filter(function(item){return item.types===\"Chemical\";}),others:props.testParams.filter(function(item){return item.types===\"Other\";})};setTestParams(params);}},[props.testParams]);useEffect(function(){if(props.testResult&&props.testResult[0]){var newData={xAxis:props.testResult.map(function(item){var _props$scheme;return\"\".concat(getNumberByLanguage(item[\"year\"]),\" \").concat(getMonthByLanguageAndScheme(item[\"month\"],(_props$scheme=props.scheme)===null||_props$scheme===void 0?void 0:_props$scheme.system_date_format));})};setChartData(newData);}},[props.testResult]);var handleSelect=function handleSelect(name){if(selected!==null&&selected!==void 0&&selected.includes(name)){var filteredData=selected.filter(function(item){return item!==name;});setSelected(filteredData);}else{setSelected([].concat(_toConsumableArray(selected),[name]));}};useEffect(function(){var chemicalSeries=[];var otherCharts=[];selected.forEach(function(item,index){var _props$testParams;var testParam=(_props$testParams=props.testParams)===null||_props$testParams===void 0?void 0:_props$testParams.find(function(param){return param.parameter_name===item;});if((testParam===null||testParam===void 0?void 0:testParam.types)===\"Chemical\"){chemicalSeries.push({name:testParam===null||testParam===void 0?void 0:testParam.parameter_name,type:\"line\",smooth:true,data:props.testResult.map(function(item){var _item$data,_item$data$find;return((_item$data=item.data)===null||_item$data===void 0?void 0:(_item$data$find=_item$data.find(function(single){return single.parameter__parameter_name===(testParam===null||testParam===void 0?void 0:testParam.parameter_name);}))===null||_item$data$find===void 0?void 0:_item$data$find.total_value)||0;})});}else{var newChart=Object.assign({},_objectSpread(_objectSpread({},chartConfig),{},{xAxis:{type:\"category\",boundaryGap:false,data:chartData===null||chartData===void 0?void 0:chartData.xAxis,axisLabel:{formatter:function formatter(name){return name===null||name===void 0?void 0:name.replace(props.type,\"\");}}},series:[{name:testParam===null||testParam===void 0?void 0:testParam.parameter_name,type:\"line\",smooth:true,data:props.testResult.map(function(item){var _item$data2,_item$data2$find;return((_item$data2=item.data)===null||_item$data2===void 0?void 0:(_item$data2$find=_item$data2.find(function(single){return single.parameter__parameter_name===(testParam===null||testParam===void 0?void 0:testParam.parameter_name);}))===null||_item$data2$find===void 0?void 0:_item$data2$find.total_value)||0;})}]}));otherCharts.push(newChart);}});setSeriesData(chemicalSeries);setOtherSeriesData(otherCharts);// const selectedData = selected.map((item) => ({\n//   ...config,\n//   name: props.options.find((opt) => opt.id === item)?.name || \"\",\n//   data: chartData && chartData[item],\n//   itemStyle: {\n//     color: props.options.find((opt) => opt.id === item)?.color || \"\",\n//   },\n// }));\n// const tableData = selected.map((item) => ({\n//   name: props.options.find((opt) => opt.id === item)?.name || \"\",\n//   color: props.options.find((opt) => opt.id === item)?.color || \"\",\n//   data: chartData && chartData[item],\n// }));\n// setSeriesData(selectedData);\n// setTableData(tableData);\n},[chartData,selected]);var chemicalSeriesOptionData={tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},legend:{show:true},grid:{left:\"3%\",right:\"5%\",bottom:\"3%\",//   top: \"6%\",\ncontainLabel:true},xAxis:{type:\"category\",boundaryGap:false,data:chartData===null||chartData===void 0?void 0:chartData.xAxis,axisLabel:{formatter:function formatter(name){return name===null||name===void 0?void 0:name.replace(props.type,\"\");}}},yAxis:{type:\"value\"},series:seriesData};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9\"},/*#__PURE__*/React.createElement(GeneralChart,{minHeight:400,options:chemicalSeriesOptionData}),otherSeriesData&&otherSeriesData.map(function(item){return/*#__PURE__*/React.createElement(GeneralChart,{minHeight:400,options:item});})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 chartOptions\"},/*#__PURE__*/React.createElement(\"h6\",null,\"Select\"),/*#__PURE__*/React.createElement(\"p\",null,\"Chemicals\"),/*#__PURE__*/React.createElement(\"ul\",null,testParams===null||testParams===void 0?void 0:testParams.chemical.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},/*#__PURE__*/React.createElement(CustomCheckBox,{id:\"\"+item.id,label:item.parameter_name,onChange:function onChange(e){return handleSelect(\"\"+item.parameter_name);},checked:selected.includes(\"\"+item.parameter_name)}));})),/*#__PURE__*/React.createElement(\"p\",{className:\"mt-3\"},\"Others\"),/*#__PURE__*/React.createElement(\"ul\",null,testParams===null||testParams===void 0?void 0:testParams.others.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},/*#__PURE__*/React.createElement(CustomCheckBox,{id:\"\"+item.id,label:item.parameter_name,onChange:function onChange(e){return handleSelect(\"\"+item.parameter_name);},checked:selected.includes(\"\"+item.parameter_name)}));}))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,testParams:state.testParamtersData.testParametersData.data,testResult:state.reportData.waterTestResultsData.data,scheme:state.waterSchemeData.waterSchemeDetailsData.data};};var mapDispatchToProps={};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(LineChart);","map":null,"metadata":{},"sourceType":"module"}