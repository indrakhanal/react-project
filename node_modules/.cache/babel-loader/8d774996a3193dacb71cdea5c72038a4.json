{"ast":null,"code":"var _jsxFileName = \"E:\\\\Smart Tech Solution\\\\React JS\\\\react-project\\\\src\\\\core\\\\Protected\\\\Finance\\\\CashBook\\\\CashBookByDate\\\\CashbookExpenditureTable.tsx\",\n    _s = $RefreshSig$();\n\nimport { CameraIcon } from \"assets/images/xd\";\nimport GeneralModal from \"components/UI/GeneralModal\";\nimport Slider from \"components/UI/Slider\";\nimport { getMonthByLanguageAndScheme } from \"i18n/i18n\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport { geAllExpenditureAction } from \"store/modules/expenditure/getAllExpenditure\";\nimport { getExpenditureCategoryAction } from \"store/modules/expenditure/getExpenditureCategory\";\nimport { getPreviousExpenditureTotalAction } from \"store/modules/expenditure/getPreviousExpenditureTotal\";\nimport { sortAplabetically } from \"utils/utilsFunction/sorting\";\n\nconst CashbookExpenditureTable = props => {\n  _s();\n\n  var _sortAplabetically, _sortAplabetically3, _props$sliderImages, _props$activeDate, _props$schemeDetails3;\n\n  const {\n    expenditureData,\n    expenditureCategories,\n    language,\n    schemeSlug,\n    schemeDetails,\n    previousExpenditureTotal,\n    getExpenditureAction,\n    getExpenditureCategoryAction,\n    getPreviousExpenditureTotalAction\n  } = props;\n  const [modal, setModal] = useState(false);\n\n  const toggle = () => setModal(!modal);\n\n  useEffect(() => {\n    if (language && schemeSlug && schemeDetails && props.activeTab) {\n      if (props.activeTab === \"2\") {\n        getExpenditureAction(language, schemeSlug, props.activeDate, props.endDate);\n        getExpenditureCategoryAction(schemeSlug);\n      }\n    }\n  }, [language, props.activeDate, props.endDate, schemeSlug, schemeDetails, props.activeTab]);\n  const {\n    t\n  } = useTranslation([\"cashbook\"]);\n  console.log(schemeDetails, \"schemeDetails\");\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"data-table table-responsive\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table mt-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, t(\"cashbook:date\")), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, t(\"cashbook:description\")), (_sortAplabetically = sortAplabetically(expenditureCategories, \"name\")) === null || _sortAplabetically === void 0 ? void 0 : _sortAplabetically.map((incomeCategory, index) => /*#__PURE__*/React.createElement(\"th\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 19\n    }\n  }, incomeCategory.name)))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, expenditureData === null || expenditureData === void 0 ? void 0 : expenditureData.map((income, index) => {\n    var _sortAplabetically2;\n\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      onClick: toggle,\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 19\n      }\n    }, language === \"en\" ? income.date : income.date_np), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 19\n      }\n    }, income.title), (_sortAplabetically2 = sortAplabetically(expenditureCategories, \"name\")) === null || _sortAplabetically2 === void 0 ? void 0 : _sortAplabetically2.map((incomeCategory, index) => {\n      if (income.category.name === incomeCategory.name) {\n        var _props$schemeDetails;\n\n        return /*#__PURE__*/React.createElement(\"td\", {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 27\n          }\n        }, (_props$schemeDetails = props.schemeDetails) === null || _props$schemeDetails === void 0 ? void 0 : _props$schemeDetails.currency, \" \", income.income_amount);\n      } else {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 32\n          }\n        }, \"-\");\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, t(\"cashbook:total\")), (_sortAplabetically3 = sortAplabetically(expenditureCategories, \"name\")) === null || _sortAplabetically3 === void 0 ? void 0 : _sortAplabetically3.map((incomeCategory, index) => {\n    var _previousExpenditureT;\n\n    const findData = previousExpenditureTotal === null || previousExpenditureTotal === void 0 ? void 0 : (_previousExpenditureT = previousExpenditureTotal.present_month_data) === null || _previousExpenditureT === void 0 ? void 0 : _previousExpenditureT.find(prev => prev.expense_category_name === incomeCategory.name);\n\n    if (findData) {\n      var _props$schemeDetails2;\n\n      return /*#__PURE__*/React.createElement(\"td\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 23\n        }\n      }, (_props$schemeDetails2 = props.schemeDetails) === null || _props$schemeDetails2 === void 0 ? void 0 : _props$schemeDetails2.currency, \" \", findData.total_expense_amount);\n    } else {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 28\n        }\n      }, \"-\");\n    }\n  })), props.sliderImages && props.sliderImages instanceof Array && ((_props$sliderImages = props.sliderImages) === null || _props$sliderImages === void 0 ? void 0 : _props$sliderImages.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n    role: \"button\",\n    onClick: () => setModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: CameraIcon,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }), \" \\xA0\\xA0 Paper Cashbook Image -\", \" \", getMonthByLanguageAndScheme((_props$activeDate = props.activeDate) === null || _props$activeDate === void 0 ? void 0 : _props$activeDate.split(\"-\")[1], (_props$schemeDetails3 = props.schemeDetails) === null || _props$schemeDetails3 === void 0 ? void 0 : _props$schemeDetails3.system_date_format))))))), /*#__PURE__*/React.createElement(GeneralModal, {\n    open: modal,\n    toggle: toggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Slider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(CashbookExpenditureTable, \"DiRKwIAoqjIw974vFHFojx4UV7s=\", false, function () {\n  return [useTranslation];\n});\n\n_c = CashbookExpenditureTable;\n\nconst mapStateToProps = state => {\n  var _state$waterSchemeDat;\n\n  return {\n    language: state.i18nextData.languageType,\n    sliderImages: state.incomeData.getIncomeExpenseImgae.data,\n    schemeDetails: state.waterSchemeData.waterSchemeDetailsData.data,\n    schemeSlug: (_state$waterSchemeDat = state.waterSchemeData.waterSchemeDetailsData.data) === null || _state$waterSchemeDat === void 0 ? void 0 : _state$waterSchemeDat.slug,\n    expenditureData: state.expenditureData.getAllExpenditureData.data,\n    expenditureCategories: state.expenditureData.getExpenditureCategory.data,\n    previousExpenditureTotal: state.expenditureData.getPreviousExpenditureTotal.data\n  };\n};\n\nconst mapDispatchToProps = {\n  getExpenditureAction: geAllExpenditureAction,\n  getExpenditureCategoryAction: getExpenditureCategoryAction,\n  getPreviousExpenditureTotalAction: getPreviousExpenditureTotalAction\n};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport default _c2 = connector(CashbookExpenditureTable);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CashbookExpenditureTable\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["E:/Smart Tech Solution/React JS/react-project/src/core/Protected/Finance/CashBook/CashBookByDate/CashbookExpenditureTable.tsx"],"names":["CameraIcon","GeneralModal","Slider","getMonthByLanguageAndScheme","React","useEffect","useState","useTranslation","connect","geAllExpenditureAction","getExpenditureCategoryAction","getPreviousExpenditureTotalAction","sortAplabetically","CashbookExpenditureTable","props","expenditureData","expenditureCategories","language","schemeSlug","schemeDetails","previousExpenditureTotal","getExpenditureAction","modal","setModal","toggle","activeTab","activeDate","endDate","t","console","log","map","incomeCategory","index","name","income","date","date_np","title","category","currency","income_amount","findData","present_month_data","find","prev","expense_category_name","total_expense_amount","sliderImages","Array","length","split","system_date_format","mapStateToProps","state","i18nextData","languageType","incomeData","getIncomeExpenseImgae","data","waterSchemeData","waterSchemeDetailsData","slug","getAllExpenditureData","getExpenditureCategory","getPreviousExpenditureTotal","mapDispatchToProps","connector"],"mappings":"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","sourcesContent":["import { CameraIcon } from \"assets/images/xd\";\r\nimport GeneralModal from \"components/UI/GeneralModal\";\r\nimport Slider from \"components/UI/Slider\";\r\nimport { getMonthByLanguageAndScheme } from \"i18n/i18n\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { Table } from \"reactstrap\";\r\nimport { geAllExpenditureAction } from \"store/modules/expenditure/getAllExpenditure\";\r\nimport { getExpenditureCategoryAction } from \"store/modules/expenditure/getExpenditureCategory\";\r\nimport { getPreviousExpenditureTotalAction } from \"store/modules/expenditure/getPreviousExpenditureTotal\";\r\nimport { RootState } from \"store/root-reducer\";\r\nimport { getDefaultDate } from \"utils/utilsFunction/date-converter\";\r\nimport { sortAplabetically } from \"utils/utilsFunction/sorting\";\r\n\r\ninterface Props extends PropsFromRedux {\r\n  activeDate: string;\r\n  endDate: string;\r\n  activeTab: string;\r\n}\r\n\r\nconst CashbookExpenditureTable = (props: Props) => {\r\n  const {\r\n    expenditureData,\r\n    expenditureCategories,\r\n    language,\r\n    schemeSlug,\r\n    schemeDetails,\r\n    previousExpenditureTotal,\r\n    getExpenditureAction,\r\n    getExpenditureCategoryAction,\r\n    getPreviousExpenditureTotalAction,\r\n  } = props;\r\n\r\n  const [modal, setModal] = useState(false);\r\n  const toggle = () => setModal(!modal);\r\n\r\n  useEffect(() => {\r\n    if (language && schemeSlug && schemeDetails && props.activeTab) {\r\n      if (props.activeTab === \"2\") {\r\n        getExpenditureAction(language, schemeSlug, props.activeDate, props.endDate);\r\n        getExpenditureCategoryAction(schemeSlug);\r\n      }\r\n    }\r\n  }, [language, props.activeDate, props.endDate, schemeSlug, schemeDetails, props.activeTab]);\r\n\r\n  const { t } = useTranslation([\"cashbook\"]);\r\n\r\n  console.log(schemeDetails, \"schemeDetails\");\r\n\r\n  return (\r\n    <>\r\n      <div className=\"mt-3\">\r\n        <div className=\"data-table table-responsive\">\r\n          <table className=\"table mt-2\">\r\n            <thead>\r\n              <tr>\r\n                <th>{t(\"cashbook:date\")}</th>\r\n                <th>{t(\"cashbook:description\")}</th>\r\n                {sortAplabetically(expenditureCategories, \"name\")?.map((incomeCategory, index) => (\r\n                  <th key={index}>{incomeCategory.name}</th>\r\n                ))}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {expenditureData?.map((income, index) => (\r\n                <tr onClick={toggle} key={index}>\r\n                  <td>{language === \"en\" ? income.date : income.date_np}</td>\r\n                  <td>{income.title}</td>\r\n                  {sortAplabetically(expenditureCategories, \"name\")?.map(\r\n                    (incomeCategory, index) => {\r\n                      if (income.category.name === incomeCategory.name) {\r\n                        return (\r\n                          <td key={index}>\r\n                            {props.schemeDetails?.currency} {income.income_amount}\r\n                          </td>\r\n                        );\r\n                      } else {\r\n                        return <td key={index}>-</td>;\r\n                      }\r\n                    }\r\n                  )}\r\n                </tr>\r\n              ))}\r\n\r\n              <tr>\r\n                <td></td>\r\n                <td>{t(\"cashbook:total\")}</td>\r\n                {sortAplabetically(expenditureCategories, \"name\")?.map((incomeCategory, index) => {\r\n                  const findData = previousExpenditureTotal?.present_month_data?.find(\r\n                    (prev) => prev.expense_category_name === incomeCategory.name\r\n                  );\r\n                  if (findData) {\r\n                    return (\r\n                      <td key={index}>\r\n                        {props.schemeDetails?.currency} {findData.total_expense_amount}\r\n                      </td>\r\n                    );\r\n                  } else {\r\n                    return <td key={index}>-</td>;\r\n                  }\r\n                })}\r\n              </tr>\r\n\r\n              {props.sliderImages &&\r\n                props.sliderImages instanceof Array &&\r\n                props.sliderImages?.length > 0 && (\r\n                  <>\r\n                    <tr role=\"button\" onClick={() => setModal(true)}>\r\n                      <td>\r\n                        <img src={CameraIcon} alt=\"\" /> &nbsp;&nbsp; Paper Cashbook Image -{\" \"}\r\n                        {getMonthByLanguageAndScheme(\r\n                          props.activeDate?.split(\"-\")[1],\r\n                          props.schemeDetails?.system_date_format\r\n                        )}\r\n                      </td>\r\n                    </tr>\r\n                  </>\r\n                )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <GeneralModal open={modal} toggle={toggle}>\r\n          <Slider />\r\n        </GeneralModal>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  language: state.i18nextData.languageType,\r\n  sliderImages: state.incomeData.getIncomeExpenseImgae.data,\r\n  schemeDetails: state.waterSchemeData.waterSchemeDetailsData.data,\r\n  schemeSlug: state.waterSchemeData.waterSchemeDetailsData.data?.slug,\r\n  expenditureData: state.expenditureData.getAllExpenditureData.data,\r\n  expenditureCategories: state.expenditureData.getExpenditureCategory.data,\r\n  previousExpenditureTotal: state.expenditureData.getPreviousExpenditureTotal.data,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getExpenditureAction: geAllExpenditureAction,\r\n  getExpenditureCategoryAction: getExpenditureCategoryAction,\r\n  getPreviousExpenditureTotalAction: getPreviousExpenditureTotalAction,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(CashbookExpenditureTable);\r\n"]},"metadata":{},"sourceType":"module"}