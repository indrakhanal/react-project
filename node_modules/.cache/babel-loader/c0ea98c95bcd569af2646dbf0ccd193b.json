{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import{getDashboardComponentInfoAction}from\"store/modules/maintainance/dashboardComponentInfo\";import CostDataHeader,{CostData}from\"./Components/CostData\";import NormalDataHeader,{NormalData}from\"./Components/NormalData\";import RiskDataHeader,{RiskData}from\"./Components/RiskData\";import Thumbnail from\"assets/images/thumbnail.png\";import{SRLWrapper}from\"simple-react-lightbox\";var AssetTable=function AssetTable(props){var _useTranslation=useTranslation([\"maintainance\"]),t=_useTranslation.t;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),showRisk=_React$useState2[0],setShowRisk=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),showCost=_React$useState4[0],setShowCost=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),tableData=_React$useState6[0],setTableData=_React$useState6[1];React.useEffect(function(){if(props.schemeSlug){props.getDashboardComponentInfoAction(props.language,props.schemeSlug);}},[props.language,props.schemeSlug]);React.useEffect(function(){if(props.componentData){var _props$componentData;var newGroupedData={};(_props$componentData=props.componentData)===null||_props$componentData===void 0?void 0:_props$componentData.forEach(function(data){if(data.component.category.name in newGroupedData){newGroupedData[data.component.category.name].push(data);}else{newGroupedData[data.component.category.name]=[data];}});setTableData(newGroupedData);}},[props.componentData]);console.log(tableData,\"newGroupedData\");return/*#__PURE__*/React.createElement(\"div\",{className:\"tabular\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table-02\"},/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{className:\"\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",colSpan:5}),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:showRisk||showCost?\"placeholder\":\"top-headers\",colSpan:3},!showRisk&&!showCost&&t(\"maintainance:mitigation\")),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:showRisk||showCost?\"placeholder\":\"top-headers\",colSpan:3},!showRisk&&!showCost&&t(\"maintainance:responsible\")))),/*#__PURE__*/React.createElement(\"tr\",{className:\"header\"},/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"bg-header\",style:{width:400}},t(\"maintainance:assetComponent\")),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"bg-header\"},t(\"maintainance:dopf\")),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"bg-header\"},t(\"maintainance:lifespan\")),showCost?/*#__PURE__*/React.createElement(CostDataHeader,{onClick:function onClick(){return setShowCost(false);}}):showRisk?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RiskDataHeader,{onClick:function onClick(){return setShowRisk(false);}})):/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",rowSpan:2,className:\"expand-header risk-tab\",role:\"button\",onClick:function onClick(){return setShowRisk(!showRisk);}},/*#__PURE__*/React.createElement(\"span\",{className:\"pill\",role:\"button\",onClick:function onClick(){return setShowRisk(!showRisk);}},t(\"maintainance:risk\")),t(\"maintainance:click\")),showRisk||showCost?/*#__PURE__*/React.createElement(React.Fragment,null):/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",rowSpan:2,className:\"expand-header  cost-tab\",role:\"button\",onClick:function onClick(){return setShowCost(!showCost);}},/*#__PURE__*/React.createElement(\"span\",{className:\"pill\",role:\"button\",onClick:function onClick(){return setShowCost(!showCost);}},t(\"maintainance:cost\")),t(\"maintainance:click\")),showRisk||(showCost?/*#__PURE__*/React.createElement(React.Fragment,null):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NormalDataHeader,null)))),tableData&&Object.entries(tableData).map(function(item){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:showCost?8:3,className:\"component-title\"},item[0]),/*#__PURE__*/React.createElement(\"td\",null)),item[1]instanceof Array&&item[1].map(function(data){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},/*#__PURE__*/React.createElement(\"div\",{className:\"component-image-wrapper\"},/*#__PURE__*/React.createElement(SRLWrapper,null,/*#__PURE__*/React.createElement(\"img\",{src:data.componant_picture||Thumbnail,alt:\"\"}))),data.component.name)),/*#__PURE__*/React.createElement(\"td\",null,data.possible_failure),/*#__PURE__*/React.createElement(\"td\",null,data.maintenance_interval,\" \",data.interval_unit),!showRisk&&/*#__PURE__*/React.createElement(\"td\",{className:\"\\n                        \".concat(data.resulting_risk_score<=4?\"bg-green\":data.resulting_risk_score<=8?\"bg-yellow\":data.resulting_risk_score<=12?\"bg-orange\":\"bg-red\",\"\\n                        \"),role:\"button\",onClick:function onClick(){return setShowRisk(!showRisk);}},data.resulting_risk_score),showRisk||showCost?/*#__PURE__*/React.createElement(React.Fragment,null):/*#__PURE__*/React.createElement(\"td\",{className:\"text-center\"},props.currency,\" \",data.seggregated_or_unseggregated_cost),showRisk||showCost?/*#__PURE__*/React.createElement(React.Fragment,null,showCost?/*#__PURE__*/React.createElement(CostData,{data:data,currency:props.currency}):showRisk?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(RiskData,{data:data,onClick:function onClick(){return setShowRisk(false);}})):/*#__PURE__*/React.createElement(React.Fragment,null)):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(NormalData,{data:data})));}));}))));};var mapStateToProps=function mapStateToProps(state){var _state$waterSchemeDat,_state$waterSchemeDat2;return{language:state.i18nextData.languageType,schemeSlug:(_state$waterSchemeDat=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat===void 0?void 0:_state$waterSchemeDat.slug,currency:(_state$waterSchemeDat2=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat2===void 0?void 0:_state$waterSchemeDat2.currency,componentData:state.maintainanceData.dashboardComponentInfoData.data};};var mapDispatchToProps={getDashboardComponentInfoAction:getDashboardComponentInfoAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(AssetTable);","map":null,"metadata":{},"sourceType":"module"}