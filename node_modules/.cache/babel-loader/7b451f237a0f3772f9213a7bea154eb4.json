{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{DeleteIcon,EditIconDark}from\"assets/images/xd\";import toast from\"components/React/ToastNotifier/ToastNotifier\";import ConfirmationModal from\"components/UI/ConfirmationModal\";import useDeleteConfirmation from\"hooks/useDeleteConfirmation\";import{getNumberByLanguage}from\"i18n/i18n\";import React from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import{deleteUseBasedWaterTariffAction}from\"store/modules/waterTarrifs/deleteUseBasedWaterTariff\";import{getUsIncomeEstimateThisYearAction}from\"store/modules/waterTarrifs/getIncomeEstimateThisYear\";import{getUseBasedWaterTarrifsAction}from\"store/modules/waterTarrifs/getUseBasedWaterTarrifs\";import{getWaterTarrifsAction}from\"store/modules/waterTarrifs/getWaterTarrifs\";var UseBasedList=function UseBasedList(props){var _props$waterTarrifs,_props$waterTarrifs2;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useDeleteConfirmatio=useDeleteConfirmation(),editId=_useDeleteConfirmatio.editId,modal=_useDeleteConfirmatio.modal,handleDeleteClick=_useDeleteConfirmatio.handleDeleteClick,resetDeleteData=_useDeleteConfirmatio.resetDeleteData,toggleModal=_useDeleteConfirmatio.toggleModal;var deleteTariffRate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return props.deleteUseBasedWaterTariffAction(editId);case 3:response=_context.sent;console.log(response,\"response\");if(response.status===204){toast.success(t(\"home:deleteSuccess\"));props.getUseBasedWaterTarrifsAction(props.language,props.schemeSlug);props.getUsIncomeEstimateThisYearAction(props.schemeSlug);resetDeleteData();}else{toast.error(t(\"home:deleteError\"));resetDeleteData();}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0,\"error\");case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function deleteTariffRate(){return _ref.apply(this,arguments);};}();var count=0;return/*#__PURE__*/React.createElement(\"div\",{className:\"data-table mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table mt-2\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{style:{borderRadius:\"5px 0 0 0\"}},t(\"home:sn\")),/*#__PURE__*/React.createElement(\"th\",{style:{}},t(\"finance:appliedDate\")),/*#__PURE__*/React.createElement(\"th\",{style:{}},t(\"finance:unitRange\")),/*#__PURE__*/React.createElement(\"th\",{style:{}},t(\"home:rate\")),\" \",/*#__PURE__*/React.createElement(\"th\",{style:{}},t(\"finance:epcs\")),/*#__PURE__*/React.createElement(\"th\",{style:{borderRadius:\"0 5px 0 0\"}},t(\"home:action\")))),/*#__PURE__*/React.createElement(\"tbody\",null,props.waterTarrifs&&((_props$waterTarrifs=props.waterTarrifs)===null||_props$waterTarrifs===void 0?void 0:_props$waterTarrifs.length)>0?(_props$waterTarrifs2=props.waterTarrifs)===null||_props$waterTarrifs2===void 0?void 0:_props$waterTarrifs2.map(function(item,index){var _item$used_based_unit;return/*#__PURE__*/React.createElement(React.Fragment,{key:item.apply_date},(_item$used_based_unit=item.used_based_units)===null||_item$used_based_unit===void 0?void 0:_item$used_based_unit.map(function(tariff,index){var _props$scheme;count=count+1;return/*#__PURE__*/React.createElement(\"tr\",{key:tariff.id},/*#__PURE__*/React.createElement(\"td\",null,getNumberByLanguage(count)),/*#__PURE__*/React.createElement(\"td\",null,\" \",getNumberByLanguage(item.apply_date)),/*#__PURE__*/React.createElement(\"td\",null,\" \",getNumberByLanguage(tariff.unit_from),\" -\",\" \",getNumberByLanguage(tariff.unit_to),\" \",t(\"home:units\")),/*#__PURE__*/React.createElement(\"td\",null,(_props$scheme=props.scheme)===null||_props$scheme===void 0?void 0:_props$scheme.currency,\". \",getNumberByLanguage(tariff.rate)||\"-\",\" |\",\" \",t(\"home:unit\")),/*#__PURE__*/React.createElement(\"td\",{style:{}},getNumberByLanguage(tariff.estimated_paying_connection)),/*#__PURE__*/React.createElement(\"td\",{className:\"action\"},/*#__PURE__*/React.createElement(\"div\",{role:\"button\",onClick:function onClick(){return props.setEditData({tariff:tariff,item:item});}},/*#__PURE__*/React.createElement(\"img\",{src:EditIconDark,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{role:\"button\",onClick:function onClick(){return handleDeleteClick(tariff.id);}},/*#__PURE__*/React.createElement(\"img\",{src:DeleteIcon,alt:\"\"}))));}));}):/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:6,className:\"text-center\"},\"No Data Available\"))))),/*#__PURE__*/React.createElement(ConfirmationModal,{open:modal,handleModal:function handleModal(){return toggleModal();},handleConfirmClick:function handleConfirmClick(){return deleteTariffRate();}}));};var mapStateToProps=function mapStateToProps(state){var _state$waterSchemeDat;return{language:state.i18nextData.languageType,waterTarrifs:state.waterTarrifsData.getUseBasedWaterTarrifs.data,supplySchedule:state.waterTarrifsData.waterTarrifData.data,scheme:state.waterSchemeData.waterSchemeDetailsData.data,schemeSlug:(_state$waterSchemeDat=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat===void 0?void 0:_state$waterSchemeDat.slug};};var mapDispatchToProps={getWaterTarrifsAction:getWaterTarrifsAction,deleteUseBasedWaterTariffAction:deleteUseBasedWaterTariffAction,getUseBasedWaterTarrifsAction:getUseBasedWaterTarrifsAction,getUsIncomeEstimateThisYearAction:getUsIncomeEstimateThisYearAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(UseBasedList);","map":null,"metadata":{},"sourceType":"module"}