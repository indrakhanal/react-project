{"ast":null,"code":"import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GeneralChart from\"components/UI/Charts/General\";import CustomCheckBox from\"components/UI/CustomCheckbox\";import{getFiscalYearData,getMonthByLanguageAndScheme}from\"i18n/i18n\";import React,{useEffect,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import DataTable from\"./DataTable\";var config={name:\"\",type:\"line\",smooth:true,data:[]};var LineChart=function LineChart(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setChartData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),seriesData=_useState4[0],setSeriesData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),tableData=_useState6[0],setTableData=_useState6[1];var _useState7=useState(props.defaultSelected),_useState8=_slicedToArray(_useState7,2),selected=_useState8[0],setSelected=_useState8[1];var getDataByArray=function getDataByArray(){};useEffect(function(){if(props.intervalData&&props.waterSupplyData){var _props$schemeDetails;var fiscalYearArray=getFiscalYearData(props.intervalData,(_props$schemeDetails=props.schemeDetails)===null||_props$schemeDetails===void 0?void 0:_props$schemeDetails.system_date_format);var newData={xAxis:fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _props$schemeDetails2;return getMonthByLanguageAndScheme(item,(_props$schemeDetails2=props.schemeDetails)===null||_props$schemeDetails2===void 0?void 0:_props$schemeDetails2.system_date_format);}),total_supply_avg:fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _props$waterSupplyDat,_props$waterSupplyDat2,_props$waterSupplyDat3;return((_props$waterSupplyDat=props.waterSupplyData)===null||_props$waterSupplyDat===void 0?void 0:(_props$waterSupplyDat2=_props$waterSupplyDat.supply)===null||_props$waterSupplyDat2===void 0?void 0:(_props$waterSupplyDat3=_props$waterSupplyDat2.find(function(inc){var _inc$supply_date__mon,_inc$supply_date__mon2;return+inc.supply_date__month<10?+((_inc$supply_date__mon=inc.supply_date__month)===null||_inc$supply_date__mon===void 0?void 0:(_inc$supply_date__mon2=_inc$supply_date__mon.toString())===null||_inc$supply_date__mon2===void 0?void 0:_inc$supply_date__mon2.replace(\"0\",\"\"))===item:+inc.supply_date__month===item;}))===null||_props$waterSupplyDat3===void 0?void 0:_props$waterSupplyDat3.total_supply_avg)||0;}),total_supply:fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _props$waterSupplyDat4,_props$waterSupplyDat5,_props$waterSupplyDat6;return((_props$waterSupplyDat4=props.waterSupplyData)===null||_props$waterSupplyDat4===void 0?void 0:(_props$waterSupplyDat5=_props$waterSupplyDat4.supply)===null||_props$waterSupplyDat5===void 0?void 0:(_props$waterSupplyDat6=_props$waterSupplyDat5.find(function(inc){var _inc$supply_date__mon3,_inc$supply_date__mon4;return+inc.supply_date__month<10?+((_inc$supply_date__mon3=inc.supply_date__month)===null||_inc$supply_date__mon3===void 0?void 0:(_inc$supply_date__mon4=_inc$supply_date__mon3.toString())===null||_inc$supply_date__mon4===void 0?void 0:_inc$supply_date__mon4.replace(\"0\",\"\"))===item:+inc.supply_date__month===item;}))===null||_props$waterSupplyDat6===void 0?void 0:_props$waterSupplyDat6.total_supply)||0;}),non_revenue_water:fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _props$waterSupplyDat7,_props$waterSupplyDat8,_props$waterSupplyDat9;return((_props$waterSupplyDat7=props.waterSupplyData)===null||_props$waterSupplyDat7===void 0?void 0:(_props$waterSupplyDat8=_props$waterSupplyDat7.supply)===null||_props$waterSupplyDat8===void 0?void 0:(_props$waterSupplyDat9=_props$waterSupplyDat8.find(function(inc){var _inc$supply_date__mon5,_inc$supply_date__mon6;return+inc.supply_date__month<10?+((_inc$supply_date__mon5=inc.supply_date__month)===null||_inc$supply_date__mon5===void 0?void 0:(_inc$supply_date__mon6=_inc$supply_date__mon5.toString())===null||_inc$supply_date__mon6===void 0?void 0:_inc$supply_date__mon6.replace(\"0\",\"\"))===item:+inc.supply_date__month===item;}))===null||_props$waterSupplyDat9===void 0?void 0:_props$waterSupplyDat9.non_revenue_water)||0;})};setChartData(newData);}},[props.waterSupplyData,props.schemeDetails,props.intervalData]);var handleSelect=function handleSelect(name){if(selected!==null&&selected!==void 0&&selected.includes(name)){var filteredData=selected.filter(function(item){return item!==name;});setSelected(filteredData);}else{setSelected([].concat(_toConsumableArray(selected),[name]));}};useEffect(function(){var selectedData=selected.map(function(item){var _props$options$find,_props$options$find2;return _objectSpread(_objectSpread({},config),{},{name:((_props$options$find=props.options.find(function(opt){return opt.id===item;}))===null||_props$options$find===void 0?void 0:_props$options$find.name)||\"\",data:chartData&&chartData[item],itemStyle:{color:((_props$options$find2=props.options.find(function(opt){return opt.id===item;}))===null||_props$options$find2===void 0?void 0:_props$options$find2.color)||\"\"}});});var tableData=selected.map(function(item){var _props$options$find3,_props$options$find4;return{name:((_props$options$find3=props.options.find(function(opt){return opt.id===item;}))===null||_props$options$find3===void 0?void 0:_props$options$find3.name)||\"\",color:((_props$options$find4=props.options.find(function(opt){return opt.id===item;}))===null||_props$options$find4===void 0?void 0:_props$options$find4.color)||\"\",data:chartData&&chartData[item]};});setSeriesData(selectedData);setTableData(tableData);},[chartData,selected]);console.log(seriesData,\"<<<<<newData\");var optionData={tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},legend:{show:true},grid:{left:\"3%\",right:\"5%\",bottom:\"3%\",//   top: \"6%\",\ncontainLabel:true},xAxis:{type:\"category\",boundaryGap:false,data:chartData===null||chartData===void 0?void 0:chartData.xAxis,axisLabel:{formatter:function formatter(name){return name===null||name===void 0?void 0:name.replace(props.type,\"\");},rotate:25}},yAxis:{type:\"value\"},series:seriesData};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9\"},/*#__PURE__*/React.createElement(GeneralChart,{minHeight:400,options:optionData}),(tableData===null||tableData===void 0?void 0:tableData.length)>0&&props.type&&/*#__PURE__*/React.createElement(DataTable,{years:chartData===null||chartData===void 0?void 0:chartData.xAxis,tableData:tableData,type:props.type})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 chartOptions\"},/*#__PURE__*/React.createElement(\"h6\",null,\"Select\"),/*#__PURE__*/React.createElement(\"p\",null,\"Visualization Parameters\"),/*#__PURE__*/React.createElement(\"ul\",null,props.options.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},/*#__PURE__*/React.createElement(CustomCheckBox,{id:\"\"+item.id,label:item.name,onChange:function onChange(e){return handleSelect(item.id);},checked:selected.includes(item.id)}));}))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,schemeDetails:state.waterSchemeData.waterSchemeDetailsData.data,waterSupplyData:state.reportData.waterSupplyData.data,incomeExpenseData:state.reportData.incomeExpenseData.data,actualCF:state.reportData.actualCumulativeCashFlowData.data,expenseCF:state.reportData.expenseCumulativeCashFlowData.data,intervalData:state.waterSchemeData.getYearIntervals.data};};var mapDispatchToProps={};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(LineChart);","map":null,"metadata":{},"sourceType":"module"}