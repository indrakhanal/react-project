{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import CustomRadio from\"components/UI/CustomRadio\";import{GeneralCard}from\"components/UI/GeneralCard\";import React from\"react\";import UserBased from\"./UseBased\";import FixedRate from\"./FixedRates\";import ThisYear from\"./IncomeEstimates/ThisYear\";import IncomeEstimates from\"./IncomeExpendGraph\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import{getWaterTarrifsAction}from\"store/modules/waterTarrifs/getWaterTarrifs\";import{getFixedRateIncomeEstimatesAction}from\"store/modules/waterTarrifs/getFixedRateIncomeEstimates\";import{getUseBasedWaterTarrifsAction}from\"store/modules/waterTarrifs/getUseBasedWaterTarrifs\";var Tarrifrates=function Tarrifrates(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _React$useState=React.useState(\"1\"),_React$useState2=_slicedToArray(_React$useState,2),rateType=_React$useState2[0],setRateType=_React$useState2[1];//1 -> use Based //2 -> Fixed rate\nvar _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),tariffType=_React$useState4[0],setTariffType=_React$useState4[1];React.useEffect(function(){if(props.language&&props.schemeSlug){props.getWaterTarrifsAction(props.language,props.schemeSlug,\"fixed\");props.getUseBasedWaterTarrifsAction(props.language,props.schemeSlug);}},[props.language,props.schemeSlug]);console.log(props.waterTarrifs,props.useBasedWaterTarrifs,\"watterrrtarfififi\");React.useEffect(function(){if(props.waterTarrifs||props.useBasedWaterTarrifs){var _props$useBasedWaterT,_props$waterTarrifs;if((_props$useBasedWaterT=props.useBasedWaterTarrifs)!==null&&_props$useBasedWaterT!==void 0&&_props$useBasedWaterT.some(function(item){return item.terif_type===\"Use Based\";})){setTariffType(\"useBased\");setRateType(\"1\");}else if((_props$waterTarrifs=props.waterTarrifs)!==null&&_props$waterTarrifs!==void 0&&_props$waterTarrifs.some(function(item){return item.terif_type===\"Fixed\";})){setTariffType(\"fixed\");setRateType(\"2\");}else{setTariffType(\"\");}}},[props.waterTarrifs,props.useBasedWaterTarrifs]);return/*#__PURE__*/React.createElement(\"div\",{className:\"container py-3 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-12\"},/*#__PURE__*/React.createElement(GeneralCard,{title:t(\"sidebar:tariffRates\")},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex\"},tariffType!==\"fixed\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"mr-2\"},/*#__PURE__*/React.createElement(CustomRadio,{label:t(\"finance:useBased\"),id:\"userBased\",name:\"1\",value:1,checked:rateType===\"1\",onChange:function onChange(e){return setRateType(e.target.value);}})),tariffType!==\"useBased\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"ml-2\"},/*#__PURE__*/React.createElement(CustomRadio,{label:t(\"finance:fixedRate\"),id:\"fixed2\",name:\"2\",value:2,checked:rateType===\"2\",onChange:function onChange(e){return setRateType(e.target.value);}}))),rateType===\"1\"?/*#__PURE__*/React.createElement(UserBased,null):/*#__PURE__*/React.createElement(FixedRate,null))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-8 mt-3 \"},/*#__PURE__*/React.createElement(GeneralCard,{title:t(\"finance:incomeEstimateTY\")},/*#__PURE__*/React.createElement(ThisYear,{rateType:rateType}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 mt-3 \"},/*#__PURE__*/React.createElement(GeneralCard,{title:t(\"finance:incomeEstimate\")},/*#__PURE__*/React.createElement(IncomeEstimates,null)))));};var mapStateToProps=function mapStateToProps(state){var _state$waterSchemeDat;return{language:state.i18nextData.languageType,waterTarrifs:state.waterTarrifsData.waterTarrifData.data,useBasedWaterTarrifs:state.waterTarrifsData.getUseBasedWaterTarrifs.data,supplySchedule:state.waterTarrifsData.waterTarrifData.data,schemeSlug:(_state$waterSchemeDat=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat===void 0?void 0:_state$waterSchemeDat.slug};};var mapDispatchToProps={getWaterTarrifsAction:getWaterTarrifsAction,getFixedRateIncomeEstimatesAction:getFixedRateIncomeEstimatesAction,getUseBasedWaterTarrifsAction:getUseBasedWaterTarrifsAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(Tarrifrates);","map":null,"metadata":{},"sourceType":"module"}