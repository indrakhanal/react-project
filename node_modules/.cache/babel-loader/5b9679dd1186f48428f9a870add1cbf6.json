{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GeneralChart from\"components/UI/Charts/General\";import{GeneralCard}from\"components/UI/GeneralCard\";import{getNumberByLanguage}from\"i18n/i18n\";import React,{useEffect,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import DataTable from\"./DataTable\";var DonoughtChart=function DonoughtChart(props){var _useTranslation=useTranslation([\"home\",\"finance\"]),t=_useTranslation.t;var _useState=useState(),_useState2=_slicedToArray(_useState,2),incomeDistriBution=_useState2[0],setIncomeDisttribution=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),expenseDistriBution=_useState4[0],setExpenseDisttribution=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),incomeTableData=_useState6[0],setIncomeTableData=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),expenseTableData=_useState8[0],setExpenseTableData=_useState8[1];var getIncomeCategoryColor=function getIncomeCategoryColor(category){if(String(category).toLocaleLowerCase().includes(\"house\")){return\"#2680eb\";}else if(String(category).toLocaleLowerCase().includes(\"inst\")){return\"#69a7f1\";}else if(String(category).toLocaleLowerCase().includes(\"water\")){return\"#e0efff\";}else if(String(category).toLocaleLowerCase().includes(\"donation\")){return\"#f4f9ff\";}else{return\"#accef7\";}};var getExpenseCategoryColor=function getExpenseCategoryColor(category){console.log(String(category).toLocaleLowerCase(),\"<<<<<<<\");if(String(category).toLocaleLowerCase().includes(\"indirect\")){return\"#f1b369\";}else if(String(category).toLocaleLowerCase().includes(\"direct\")){return\"#eb9126\";}else if(String(category).toLocaleLowerCase().includes(\"maint\")){return\"#f7d5ac\";}else{return\"#accef7\";}};useEffect(function(){var _props$incomeByCatego,_props$incomeByCatego2,_props$expenseByCateg,_props$expenseByCateg2,_props$incomeByCatego3,_props$expenseByCateg3;var seriesIncomeData={this_year:(_props$incomeByCatego=props.incomeByCategory)===null||_props$incomeByCatego===void 0?void 0:_props$incomeByCatego.income_this_year.map(function(item){return{value:item.total_amount,name:item.category__name,itemStyle:{color:getIncomeCategoryColor(item.category__name)}};}),all_time:(_props$incomeByCatego2=props.incomeByCategory)===null||_props$incomeByCatego2===void 0?void 0:_props$incomeByCatego2.income_all_time.map(function(item){return{value:item.total_amount,name:item.category__name,itemStyle:{color:getIncomeCategoryColor(item.category__name)}};})};var seriesExpenseData={this_year:(_props$expenseByCateg=props.expenseByCategory)===null||_props$expenseByCateg===void 0?void 0:_props$expenseByCateg.expense_this_year.map(function(item){return{value:item.total_amount,name:item.category__name,itemStyle:{color:getExpenseCategoryColor(item.category__name)}};}),all_time:(_props$expenseByCateg2=props.expenseByCategory)===null||_props$expenseByCateg2===void 0?void 0:_props$expenseByCateg2.expense_all_time.map(function(item){return{value:item.total_amount,name:item.category__name,itemStyle:{color:getExpenseCategoryColor(item.category__name)}};})};var incomeTableData=(_props$incomeByCatego3=props.incomeByCategory)===null||_props$incomeByCatego3===void 0?void 0:_props$incomeByCatego3.income_this_year.map(function(item){var _props$incomeByCatego4,_props$incomeByCatego5;return{name:item.category__name,value:{this_year:item.total_amount,all_time:(_props$incomeByCatego4=props.incomeByCategory)===null||_props$incomeByCatego4===void 0?void 0:(_props$incomeByCatego5=_props$incomeByCatego4.income_all_time.find(function(income){return income.category__name===item.category__name;}))===null||_props$incomeByCatego5===void 0?void 0:_props$incomeByCatego5.total_amount}};});var expenseTableData=(_props$expenseByCateg3=props.expenseByCategory)===null||_props$expenseByCateg3===void 0?void 0:_props$expenseByCateg3.expense_this_year.map(function(item){var _props$expenseByCateg4,_props$expenseByCateg5;return{name:item.category__name,value:{this_year:item.total_amount,all_time:(_props$expenseByCateg4=props.expenseByCategory)===null||_props$expenseByCateg4===void 0?void 0:(_props$expenseByCateg5=_props$expenseByCateg4.expense_all_time.find(function(income){return income.category__name===item.category__name;}))===null||_props$expenseByCateg5===void 0?void 0:_props$expenseByCateg5.total_amount}};});setIncomeTableData(incomeTableData);setExpenseTableData(expenseTableData);setIncomeDisttribution(seriesIncomeData);setExpenseDisttribution(seriesExpenseData);},[props.incomeByCategory,props.expenseByCategory]);return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6\"},/*#__PURE__*/React.createElement(GeneralCard,{title:t(\"home:incomeDistribution\"),className:\"mr-md-3 mt-2\",print:true},/*#__PURE__*/React.createElement(GeneralChart,{minHeight:250,options:{tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b} : {c} ({d}%)\"},legend:{bottom:\"bottom\",// top: \"10%\",\n// orient: \"vertical\",\nformatter:\"{name}\"},series:[{name:t(\"home:thisYear\"),type:\"pie\",radius:[\"55%\",\"65%\"],center:[\"25%\",\"45%\"],label:{show:true,position:\"center\",formatter:function formatter(){var _incomeDistriBution$t;return\"\".concat(props.currency,\"  \").concat(getNumberByLanguage(incomeDistriBution===null||incomeDistriBution===void 0?void 0:(_incomeDistriBution$t=incomeDistriBution.this_year)===null||_incomeDistriBution$t===void 0?void 0:_incomeDistriBution$t.reduce(function(sum,acc){return sum+(acc.value||0);},0))||0);}},data:incomeDistriBution===null||incomeDistriBution===void 0?void 0:incomeDistriBution.this_year},{name:t(\"home:allTime\"),type:\"pie\",radius:[\"55%\",\"65%\"],center:[\"75%\",\"45%\"],label:{show:true,position:\"center\",formatter:function formatter(){var _incomeDistriBution$a;return\"\".concat(props.currency,\"  \").concat(getNumberByLanguage(incomeDistriBution===null||incomeDistriBution===void 0?void 0:(_incomeDistriBution$a=incomeDistriBution.all_time)===null||_incomeDistriBution$a===void 0?void 0:_incomeDistriBution$a.reduce(function(sum,acc){return sum+(acc.value||0);},0))||0);}},data:incomeDistriBution===null||incomeDistriBution===void 0?void 0:incomeDistriBution.all_time}]}}),/*#__PURE__*/React.createElement(DataTable,{tableData:incomeTableData,headers:[t(\"home:thisYear\"),t(\"home:allTime\")]}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-6\"},/*#__PURE__*/React.createElement(GeneralCard,{title:t(\"home:expenditureDistribution\"),className:\"ml-md-3  mt-2\",print:true},/*#__PURE__*/React.createElement(GeneralChart,{minHeight:250,options:{tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b} : {c} ({d}%)\"},legend:{bottom:\"bottom\",// top: \"10%\",\n// orient: \"vertical\",\nformatter:\"{name}\"},series:[{name:t(\"home:thisYear\"),type:\"pie\",radius:[\"55%\",\"65%\"],center:[\"25%\",\"45%\"],//   itemStyle: {\n//     borderRadius: 5,\n//   },\nlabel:{show:true,position:\"center\",formatter:function formatter(){var _expenseDistriBution$;return\"\".concat(props.currency,\"  \").concat(getNumberByLanguage((expenseDistriBution===null||expenseDistriBution===void 0?void 0:(_expenseDistriBution$=expenseDistriBution.this_year)===null||_expenseDistriBution$===void 0?void 0:_expenseDistriBution$.reduce(function(sum,acc){return sum+(acc.value||0);},0))||0));}},data:expenseDistriBution===null||expenseDistriBution===void 0?void 0:expenseDistriBution.this_year},{name:t(\"home:allTime\"),type:\"pie\",radius:[\"55%\",\"65%\"],center:[\"75%\",\"45%\"],//   itemStyle: {\n//     borderRadius: 5,\n//   },\nlabel:{show:true,position:\"center\",formatter:function formatter(){var _expenseDistriBution$2;return\"  \".concat(props.currency,\"  \").concat(getNumberByLanguage((expenseDistriBution===null||expenseDistriBution===void 0?void 0:(_expenseDistriBution$2=expenseDistriBution.all_time)===null||_expenseDistriBution$2===void 0?void 0:_expenseDistriBution$2.reduce(function(sum,acc){return sum+(acc.value||0);},0))||0));}},data:expenseDistriBution===null||expenseDistriBution===void 0?void 0:expenseDistriBution.all_time}]}}),/*#__PURE__*/React.createElement(DataTable,{tableData:expenseTableData,headers:[t(\"home:thisYear\"),t(\"home:allTime\")]}))));};var mapStateToProps=function mapStateToProps(state){var _state$waterSchemeDat;return{language:state.i18nextData.languageType,incomeByCategory:state.reportData.incomeByCategoryData.data,expenseByCategory:state.reportData.expenseByCategoryData.data,currency:(_state$waterSchemeDat=state.waterSchemeData.waterSchemeDetailsData.data)===null||_state$waterSchemeDat===void 0?void 0:_state$waterSchemeDat.currency};};var mapDispatchToProps={};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(DonoughtChart);","map":null,"metadata":{},"sourceType":"module"}