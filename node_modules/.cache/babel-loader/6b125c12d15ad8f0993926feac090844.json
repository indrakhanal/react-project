{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\src\\\\core\\\\Protected\\\\Home\\\\MobileUser\\\\ManageMobileUser\\\\Form.tsx\",\n    _s = $RefreshSig$();\n\nimport FormikValidationError from \"components/React/FormikValidationError/FormikValidationError\";\nimport toast from \"components/React/ToastNotifier/ToastNotifier\";\nimport Button from \"components/UI/Forms/Buttons\";\nimport TooltipLabel from \"components/UI/TooltipLabel\";\nimport { useFormik } from \"formik\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport { getSupplyBeltsAction } from \"store/modules/supplyBelts/getWaterSupplyBelts\";\nimport { getSchemeUserAction } from \"store/modules/waterScheme/getWaterSchemeUser\";\nimport { postWaterSchemeUserAction } from \"store/modules/waterScheme/postWaterSchemeUser\";\nimport { updateWaterSchemeUserAction } from \"store/modules/waterScheme/updateWaterSchemeUser\";\nimport { mobileUserInitialValues, mobileUserValidationSchema } from \"./schema\";\n\nconst Form = props => {\n  _s();\n\n  const {\n    t\n  } = useTranslation([\"home\"]);\n  const [initialData, setInitialData] = React.useState(mobileUserInitialValues);\n  React.useEffect(() => {\n    if (props.editData) {\n      setInitialData({ ...props.editData\n      });\n    }\n  }, [props.editData]);\n  const {\n    values,\n    errors,\n    touched,\n    handleChange,\n    handleBlur,\n    setFieldValue,\n    setFieldTouched,\n    handleSubmit\n  } = useFormik({\n    enableReinitialize: true,\n    initialValues: initialData,\n    validationSchema: mobileUserValidationSchema,\n    onSubmit: async (submitValue, _ref) => {\n      let {\n        resetForm\n      } = _ref;\n      const requestData = submitValue;\n      let res;\n\n      if (props.editData) {\n        res = await props.updateWaterSchemeUserAction(props.editData.id, requestData);\n      } else {\n        res = await props.postWaterSchemeUserAction(requestData);\n      }\n\n      console.log(res, \"resss\");\n\n      if (res.status === 201 || res.status === 200) {\n        if (res.status === 201) {\n          resetForm();\n          toast.success(t(\"home:postSuccess\"));\n        } else {\n          setInitialData(mobileUserInitialValues);\n          toast.success(t(\"home:updateSuccess\"));\n        }\n\n        props.getSchemeUserAction();\n      } else {\n        var _Object$values;\n\n        const errors = (_Object$values = Object.values(res.data)) === null || _Object$values === void 0 ? void 0 : _Object$values.map(item => {\n          toast.error(item[0]);\n        });\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      e.preventDefault();\n      handleSubmit(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, t(\"home:name\"), \":\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"name\",\n    value: values.name,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FormikValidationError, {\n    name: \"name\",\n    errors: errors,\n    touched: touched,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, t(\"home:phone\"), \":\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    name: \"phone_number\",\n    value: values.phone_number,\n    onChange: handleChange,\n    onBlur: handleBlur,\n    maxLength: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FormikValidationError, {\n    name: \"phone_number\",\n    errors: errors,\n    touched: touched,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, t(\"home:password\"), \" (\", t(\"home:pin\"), \") \", /*#__PURE__*/React.createElement(TooltipLabel, {\n    id: \"psba4\",\n    text: `\"Password should be atleast 4  number digits. Alpha Character and special \ncharacter are not used.\"`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 54\n    }\n  }), \":\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"password1\",\n    type: \"number\",\n    value: values.password1,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FormikValidationError, {\n    name: \"password1\",\n    errors: errors,\n    touched: touched,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"\",\n    className: \"mr-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, t(\"home:confirmpassword\"), \":\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    name: \"password2\",\n    type: \"number\",\n    value: values.password2,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FormikValidationError, {\n    name: \"password2\",\n    errors: errors,\n    touched: touched,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn custom-btn  mr-3\",\n    text: t(\"home:save\"),\n    disabled: props.postLoading || props.updateLoading,\n    loading: props.postLoading || props.updateLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"btn custom-btn-outlined mr-3\",\n    text: t(\"home:cancel\"),\n    type: \"button\",\n    onClick: () => {\n      props.toggle();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(Form, \"MeJucyZV36Ov/ZEzfeO/kiaYKpQ=\", false, function () {\n  return [useTranslation, useFormik];\n});\n\n_c = Form;\n\nconst mapStateToProps = state => {\n  var _state$waterSchemeDat;\n\n  return {\n    language: state.i18nextData.languageType,\n    schemeSlug: (_state$waterSchemeDat = state.waterSchemeData.waterSchemeDetailsData.data) === null || _state$waterSchemeDat === void 0 ? void 0 : _state$waterSchemeDat.slug,\n    supplySchedule: state.waterSupplyData.waterScheduleData.data,\n    supplyBelts: state.supplyBeltsData.getSupplyBeltData.data,\n    postLoading: state.waterSchemeData.postWaterSchemeUser.isFetching,\n    updateLoading: state.waterSchemeData.updateWaterSchemeUser.isFetching\n  };\n};\n\nconst mapDispatchToProps = {\n  getSupplyBeltsAction,\n  postWaterSchemeUserAction,\n  getSchemeUserAction,\n  updateWaterSchemeUserAction\n};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport default _c2 = connector(Form);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Form\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/src/core/Protected/Home/MobileUser/ManageMobileUser/Form.tsx"],"names":["FormikValidationError","toast","Button","TooltipLabel","useFormik","React","useTranslation","connect","getSupplyBeltsAction","getSchemeUserAction","postWaterSchemeUserAction","updateWaterSchemeUserAction","mobileUserInitialValues","mobileUserValidationSchema","Form","props","t","initialData","setInitialData","useState","useEffect","editData","values","errors","touched","handleChange","handleBlur","setFieldValue","setFieldTouched","handleSubmit","enableReinitialize","initialValues","validationSchema","onSubmit","submitValue","resetForm","requestData","res","id","console","log","status","success","Object","data","map","item","error","e","preventDefault","name","phone_number","password1","password2","postLoading","updateLoading","toggle","mapStateToProps","state","language","i18nextData","languageType","schemeSlug","waterSchemeData","waterSchemeDetailsData","slug","supplySchedule","waterSupplyData","waterScheduleData","supplyBelts","supplyBeltsData","getSupplyBeltData","postWaterSchemeUser","isFetching","updateWaterSchemeUser","mapDispatchToProps","connector"],"mappings":"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","sourcesContent":["import FormikValidationError from \"components/React/FormikValidationError/FormikValidationError\";\r\nimport toast from \"components/React/ToastNotifier/ToastNotifier\";\r\nimport Button from \"components/UI/Forms/Buttons\";\r\nimport TooltipLabel from \"components/UI/TooltipLabel\";\r\nimport { useFormik } from \"formik\";\r\nimport React from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { getSupplyBeltsAction } from \"store/modules/supplyBelts/getWaterSupplyBelts\";\r\nimport { getSchemeUserAction } from \"store/modules/waterScheme/getWaterSchemeUser\";\r\nimport { postWaterSchemeUserAction } from \"store/modules/waterScheme/postWaterSchemeUser\";\r\nimport { updateWaterSchemeUserAction } from \"store/modules/waterScheme/updateWaterSchemeUser\";\r\nimport { RootState } from \"store/root-reducer\";\r\nimport { mobileUserInitialValues, mobileUserValidationSchema } from \"./schema\";\r\n\r\ninterface Props extends PropsFromRedux {\r\n  editData: any;\r\n  toggle: any;\r\n}\r\n\r\nconst Form = (props: Props) => {\r\n  const { t } = useTranslation([\"home\"]);\r\n\r\n  const [initialData, setInitialData] = React.useState(mobileUserInitialValues);\r\n\r\n  React.useEffect(() => {\r\n    if (props.editData) {\r\n      setInitialData({\r\n        ...props.editData,\r\n      });\r\n    }\r\n  }, [props.editData]);\r\n\r\n  const {\r\n    values,\r\n    errors,\r\n    touched,\r\n    handleChange,\r\n    handleBlur,\r\n    setFieldValue,\r\n    setFieldTouched,\r\n    handleSubmit,\r\n  } = useFormik({\r\n    enableReinitialize: true,\r\n    initialValues: initialData,\r\n    validationSchema: mobileUserValidationSchema,\r\n    onSubmit: async (submitValue, { resetForm }) => {\r\n      const requestData = submitValue;\r\n\r\n      let res;\r\n      if (props.editData) {\r\n        res = await props.updateWaterSchemeUserAction(props.editData.id, requestData);\r\n      } else {\r\n        res = await props.postWaterSchemeUserAction(requestData);\r\n      }\r\n\r\n      console.log(res, \"resss\");\r\n\r\n      if (res.status === 201 || res.status === 200) {\r\n        if (res.status === 201) {\r\n          resetForm();\r\n          toast.success(t(\"home:postSuccess\"));\r\n        } else {\r\n          setInitialData(mobileUserInitialValues);\r\n          toast.success(t(\"home:updateSuccess\"));\r\n        }\r\n\r\n        props.getSchemeUserAction();\r\n      } else {\r\n        const errors = Object.values(res.data)?.map((item: any) => {\r\n          toast.error(item[0]);\r\n        });\r\n      }\r\n    },\r\n  });\r\n\r\n  return (\r\n    <form\r\n      onSubmit={(e) => {\r\n        e.preventDefault();\r\n        handleSubmit(e);\r\n      }}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-4\">\r\n          <div className=\"form-group \">\r\n            <label htmlFor=\"\" className=\"mr-1\">\r\n              {t(\"home:name\")}:\r\n            </label>\r\n\r\n            <input\r\n              className=\"form-control\"\r\n              name=\"name\"\r\n              value={values.name}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n            />\r\n            <FormikValidationError name=\"name\" errors={errors} touched={touched} />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <div className=\"form-group \">\r\n            <label htmlFor=\"\" className=\"mr-1\">\r\n              {t(\"home:phone\")}:\r\n            </label>\r\n\r\n            <input\r\n              type={\"number\"}\r\n              className=\"form-control\"\r\n              name=\"phone_number\"\r\n              value={values.phone_number}\r\n              onChange={handleChange}\r\n              onBlur={handleBlur}\r\n              maxLength={10}\r\n            />\r\n            <FormikValidationError name=\"phone_number\" errors={errors} touched={touched} />\r\n          </div>\r\n        </div>\r\n\r\n        \r\n        <div className=\"col-md-4\">\r\n          <div className=\"form-group \">\r\n            <label htmlFor=\"\" className=\"mr-1\">\r\n              {t(\"home:password\")} ({t(\"home:pin\")}) <TooltipLabel id={\"psba4\"} text={`\"Password should be atleast 4  number digits. Alpha Character and special \r\ncharacter are not used.\"`} />:\r\n            </label>\r\n\r\n            <input\r\n              className=\"form-control\"\r\n              name=\"password1\"\r\n              type=\"number\"\r\n              value={values.password1}\r\n              onChange={handleChange}\r\n            />\r\n            <FormikValidationError name=\"password1\" errors={errors} touched={touched} />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-4\">\r\n          <div className=\"form-group \">\r\n            <label htmlFor=\"\" className=\"mr-1\">\r\n              {t(\"home:confirmpassword\")}:\r\n            </label>\r\n\r\n            <input\r\n              className=\"form-control\"\r\n              name=\"password2\"\r\n              type=\"number\"\r\n              value={values.password2}\r\n              onChange={handleChange}\r\n            />\r\n            <FormikValidationError name=\"password2\" errors={errors} touched={touched} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-md-12 text-right\">\r\n          <Button\r\n            className=\"btn custom-btn  mr-3\"\r\n            text={t(\"home:save\")}\r\n            disabled={props.postLoading || props.updateLoading}\r\n            loading={props.postLoading || props.updateLoading}\r\n          />\r\n          <Button\r\n            className=\"btn custom-btn-outlined mr-3\"\r\n            text={t(\"home:cancel\")}\r\n            type=\"button\"\r\n            onClick={() => {\r\n              props.toggle();\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  language: state.i18nextData.languageType,\r\n  schemeSlug: state.waterSchemeData.waterSchemeDetailsData.data?.slug,\r\n  supplySchedule: state.waterSupplyData.waterScheduleData.data,\r\n  supplyBelts: state.supplyBeltsData.getSupplyBeltData.data,\r\n  postLoading: state.waterSchemeData.postWaterSchemeUser.isFetching,\r\n  updateLoading: state.waterSchemeData.updateWaterSchemeUser.isFetching,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getSupplyBeltsAction,\r\n  postWaterSchemeUserAction,\r\n  getSchemeUserAction,\r\n  updateWaterSchemeUserAction,\r\n};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(Form);\r\n"]},"metadata":{},"sourceType":"module"}