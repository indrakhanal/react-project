{"ast":null,"code":"import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GeneralChart from\"components/UI/Charts/General\";import CustomCheckBox from\"components/UI/CustomCheckbox\";import{getNumberByLanguage}from\"i18n/i18n\";import React,{useState,useEffect}from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";import{getYearFromDate}from\"utils/utilsFunction/date-converter\";import DataTable from\"./DataTable\";var config={name:\"\",type:\"line\",smooth:true,data:[]};var LineChart=function LineChart(props){var selected=props.selected,setSelected=props.setSelected;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(),_useState2=_slicedToArray(_useState,2),chartData=_useState2[0],setChartData=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),seriesData=_useState4[0],setSeriesData=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),tableData=_useState6[0],setTableData=_useState6[1];var options=[{id:\"actual_income\",name:\"\".concat(t(\"home:actual\"),\" \").concat(t(\"home:income\")),color:\"#4DFFFF\"},{id:\"actual_expense\",name:\"\".concat(t(\"home:actual\"),\" \").concat(t(\"home:expense\")),color:\"#FF4D4D\"},{id:\"actual_cf\",name:\"\".concat(t(\"home:accf\")),color:\"#c47df7\"},{id:\"expected_income\",name:\"\".concat(t(\"home:expected\"),\" \").concat(t(\"home:income\")),color:\"#fbc757\"},{id:\"expected_expense\",name:\"\".concat(t(\"home:expected\"),\" \").concat(t(\"home:expense\")),color:\"#041C44\"},{id:\"expected_cf\",name:\"\".concat(t(\"home:eccf\")),color:\"#1d9a36\"}];useEffect(function(){var _props$incomeExpenseD,_props$incomeExpenseD2,_props$incomeExpenseD3,_props$incomeExpenseD4,_props$incomeExpenseD5,_props$incomeExpenseD6,_props$incomeExpenseD7,_props$incomeExpenseD8,_props$expenseCF,_props$expenseCF$expe,_props$expenseCF2,_props$expenseCF2$exp,_props$expenseCF3,_props$expenseCF3$exp;var newData={years:(_props$incomeExpenseD=props.incomeExpenseData)===null||_props$incomeExpenseD===void 0?void 0:(_props$incomeExpenseD2=_props$incomeExpenseD.income)===null||_props$incomeExpenseD2===void 0?void 0:_props$incomeExpenseD2.map(function(item){return\"\".concat(t(\"home:year\"),\" \").concat(getNumberByLanguage(item.year_num),\" -  \").concat(getNumberByLanguage(getYearFromDate(item.year_from)),\" - \").concat(getNumberByLanguage(getYearFromDate(item.year_to)));}),actual_income:(_props$incomeExpenseD3=props.incomeExpenseData)===null||_props$incomeExpenseD3===void 0?void 0:(_props$incomeExpenseD4=_props$incomeExpenseD3.income)===null||_props$incomeExpenseD4===void 0?void 0:_props$incomeExpenseD4.map(function(item){return item.total_amount;}),actual_expense:(_props$incomeExpenseD5=props.incomeExpenseData)===null||_props$incomeExpenseD5===void 0?void 0:(_props$incomeExpenseD6=_props$incomeExpenseD5.expense)===null||_props$incomeExpenseD6===void 0?void 0:_props$incomeExpenseD6.map(function(item){return item.total_amount;}),actual_cf:(_props$incomeExpenseD7=props.incomeExpenseData)===null||_props$incomeExpenseD7===void 0?void 0:(_props$incomeExpenseD8=_props$incomeExpenseD7.cf)===null||_props$incomeExpenseD8===void 0?void 0:_props$incomeExpenseD8.map(function(item){return item.cf;}),expected_income:(_props$expenseCF=props.expenseCF)===null||_props$expenseCF===void 0?void 0:(_props$expenseCF$expe=_props$expenseCF.expected_income)===null||_props$expenseCF$expe===void 0?void 0:_props$expenseCF$expe.map(function(item){return item.income_amount;}),expected_expense:(_props$expenseCF2=props.expenseCF)===null||_props$expenseCF2===void 0?void 0:(_props$expenseCF2$exp=_props$expenseCF2.expected_expense)===null||_props$expenseCF2$exp===void 0?void 0:_props$expenseCF2$exp.map(function(item){return item.expense_amount;}),expected_cf:(_props$expenseCF3=props.expenseCF)===null||_props$expenseCF3===void 0?void 0:(_props$expenseCF3$exp=_props$expenseCF3.expected_cf)===null||_props$expenseCF3$exp===void 0?void 0:_props$expenseCF3$exp.map(function(item){return item.cf;})};setChartData(newData);},[props.incomeExpenseData,props.actualCF,props.expenseCF]);var handleSelect=function handleSelect(name){if(selected!==null&&selected!==void 0&&selected.includes(name)){var filteredData=selected.filter(function(item){return item!==name;});setSelected(filteredData);}else{setSelected([].concat(_toConsumableArray(selected),[name]));}};useEffect(function(){var selectedData=selected.map(function(item){var _options$find,_options$find2;return _objectSpread(_objectSpread({},config),{},{name:((_options$find=options.find(function(opt){return opt.id===item;}))===null||_options$find===void 0?void 0:_options$find.name)||\"\",data:chartData&&chartData[item],itemStyle:{color:((_options$find2=options.find(function(opt){return opt.id===item;}))===null||_options$find2===void 0?void 0:_options$find2.color)||\"\"}});});var tableData=selected.map(function(item){var _options$find3,_options$find4;return{name:((_options$find3=options.find(function(opt){return opt.id===item;}))===null||_options$find3===void 0?void 0:_options$find3.name)||\"\",color:((_options$find4=options.find(function(opt){return opt.id===item;}))===null||_options$find4===void 0?void 0:_options$find4.color)||\"\",data:chartData&&chartData[item]};});setSeriesData(selectedData);setTableData(tableData);},[chartData,selected]);var optionData={tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},legend:{show:false},grid:{left:\"3%\",right:\"5%\",bottom:\"3%\",top:\"6%\",containLabel:true},xAxis:{type:\"category\",boundaryGap:false,data:chartData===null||chartData===void 0?void 0:chartData.years,axisLabel:{formatter:function formatter(name){var _name$split$;return name===null||name===void 0?void 0:(_name$split$=name.split(\"-\")[0])===null||_name$split$===void 0?void 0:_name$split$.replace(\"Year\",\"\");}}},yAxis:{type:\"value\",axisLabel:{formatter:function formatter(name){return getNumberByLanguage(name);}}},series:seriesData};return/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9\"},/*#__PURE__*/React.createElement(GeneralChart,{minHeight:300,options:optionData}),(tableData===null||tableData===void 0?void 0:tableData.length)>0&&/*#__PURE__*/React.createElement(DataTable,{years:chartData===null||chartData===void 0?void 0:chartData.years,tableData:tableData})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 chartOptions\"},/*#__PURE__*/React.createElement(\"h6\",null,\"Select\"),/*#__PURE__*/React.createElement(\"p\",null,\"Visualization Parameters\"),/*#__PURE__*/React.createElement(\"ul\",null,options.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.id},/*#__PURE__*/React.createElement(CustomCheckBox,{id:\"\"+item.id,label:item.name,onChange:function onChange(e){return handleSelect(item.id);},checked:selected.includes(item.id)}));}))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,incomeExpenseData:state.reportData.incomeExpenseData.data,actualCF:state.reportData.actualCumulativeCashFlowData.data,expenseCF:state.reportData.expenseCumulativeCashFlowData.data};};var mapDispatchToProps={};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(LineChart);","map":null,"metadata":{},"sourceType":"module"}