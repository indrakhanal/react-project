{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useLayoutEffect,useRef,useState}from\"react\";import{Calender}from\"./Calender\";import{childOf,stitchDate,ADToBS,BSToAD,validateBsYear,validateBsMonth,validateBsDay}from\"./Datepickerutils\";import\"./Datepicker.scss\";var NepaliDatePicker=function NepaliDatePicker(props){var wrapperClassName=props.wrapperClassName,_props$className=props.className,className=_props$className===void 0?\"form-control\":_props$className,value=props.value,_props$disabled=props.disabled,disabled=_props$disabled===void 0?false:_props$disabled,engDate=props.engDate,onChange=props.onChange,onSelect=props.onSelect,_props$options=props.options,options=_props$options===void 0?{}:_props$options,_props$closeOnSelect=props.closeOnSelect,closeOnSelect=_props$closeOnSelect===void 0?true:_props$closeOnSelect,maxDate=props.maxDate,maxDateToday=props.maxDateToday,minDate=props.minDate,minDateToday=props.minDateToday,id=props.id,name=props.name;// DatePicker references\nvar nepaliDatePickerWrapper=useRef(null);var nepaliDatePickerInput=useRef(null);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCalendar=_useState4[0],setShowCalendar=_useState4[1];useEffect(function(){if(value){// If invalid date\ntry{if(value){var _value$split=value.split(\"-\"),_value$split2=_slicedToArray(_value$split,3),year=_value$split2[0],month=_value$split2[1],day=_value$split2[2];if(!(year&&month&&day)){throw new RangeError(\"Invalid BS date\");}validateBsYear(+year);//Throws Error if invalid\nvalidateBsMonth(+month);//Throws Error if invalid\nvalidateBsDay(+day);//Throws Error if invalid\nsetDate(value||\"\");}}catch(e){setDate(\"\");onChange&&onChange(\"\",\"\");}}},[value]);useEffect(function(){if(engDate){var nepDate=ADToBS(new Date(engDate));if(!value||value!==nepDate){onChange&&onChange(nepDate,new Date(engDate));}}},[engDate]);var handleClickOutside=useCallback(function(event){if(nepaliDatePickerWrapper.current&&childOf(event.target,nepaliDatePickerWrapper.current)){return;}setShowCalendar(false);},[]);useLayoutEffect(function(){if(showCalendar){document.addEventListener(\"mousedown\",handleClickOutside);}return function(){document.removeEventListener(\"mousedown\",handleClickOutside);};},[showCalendar]);useLayoutEffect(function(){if(showCalendar&&nepaliDatePickerWrapper.current){var nepaliDatePicker=nepaliDatePickerWrapper.current.getBoundingClientRect();var screenHeight=window.innerHeight;var calender=nepaliDatePickerWrapper.current.querySelector(\".calender\");if(calender){setTimeout(function(){var calenderHeight=calender.clientHeight;if(calenderHeight+nepaliDatePicker.bottom>screenHeight){if(calenderHeight<nepaliDatePicker.top){calender.style.bottom=\"\".concat(nepaliDatePicker.height,\"px\");}}},0);}}},[showCalendar]);var handleOnChange=useCallback(function(changedDate){setDate(changedDate);if(onChange){onChange(changedDate,BSToAD(changedDate));}},[]);var handleOnDaySelect=useCallback(function(selectedDate){if(closeOnSelect){setShowCalendar(false);}if(onSelect){onSelect(stitchDate(selectedDate));}},[]);var datepickerEvents={change:handleOnChange,daySelect:handleOnDaySelect,todaySelect:handleOnDaySelect,yearSelect:options.yearSelect,monthSelect:options.monthSelect,previousMonthSelect:options.previousMonthSelect,nextMonthSelect:options.nextMonthSelect};var _useState5=useState({year:0,month:0,day:0}),_useState6=_slicedToArray(_useState5,2),maxDateLimit=_useState6[0],setmaxDateLimit=_useState6[1];useEffect(function(){if(maxDate||maxDateToday){var maxDateMapped;if(maxDate){maxDateMapped=maxDate===null||maxDate===void 0?void 0:maxDate.split(\"-\");}else if(maxDateToday){maxDateMapped=ADToBS(new Date()).split(\"-\");}setmaxDateLimit({year:+maxDateMapped[0],month:+maxDateMapped[1],day:+maxDateMapped[2]});}else{setmaxDateLimit({year:0,month:0,day:0});}},[maxDate,maxDateToday]);var _useState7=useState({year:0,month:0,day:0}),_useState8=_slicedToArray(_useState7,2),minDateLimit=_useState8[0],setminDateLimit=_useState8[1];useEffect(function(){if(minDate||minDateToday){var minDateMapped;if(minDate){minDateMapped=minDate===null||minDate===void 0?void 0:minDate.split(\"-\");}else if(minDateToday){minDateMapped=ADToBS(new Date()).split(\"-\");}setminDateLimit({year:+minDateMapped[0],month:+minDateMapped[1],day:+minDateMapped[2]});}else{setminDateLimit({year:0,month:0,day:0});}},[minDate,minDateToday]);return/*#__PURE__*/React.createElement(\"div\",{ref:nepaliDatePickerWrapper,className:\"nepali-date-picker \".concat(wrapperClassName||\"\")},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",ref:nepaliDatePickerInput,className:className,id:id,name:name,readOnly:disabled,autoComplete:\"off\",value:date,onClick:function onClick(){return setShowCalendar(function(){return!showCalendar;});}}),/*#__PURE__*/React.createElement(\"i\",{className:\"ic-calendar\",onClick:function onClick(){return setShowCalendar(function(){return!showCalendar;});}}),showCalendar&&/*#__PURE__*/React.createElement(Calender,{value:date,events:datepickerEvents,maxDate:maxDateLimit,minDate:minDateLimit}));};export default NepaliDatePicker;","map":null,"metadata":{},"sourceType":"module"}