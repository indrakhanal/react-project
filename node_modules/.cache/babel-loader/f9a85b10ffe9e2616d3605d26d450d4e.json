{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import{connect}from\"react-redux\";import{useHistory}from\"react-router\";import PrivateRoute from\"routes/PrivateRoute/PrivateRoute\";import useAuthentication from\"services/authentication/AuthenticationService\";import TokenService from\"services/jwt-token/jwt-token\";import{updateSchemeNameAction}from\"store/modules/schemeName\";import{getSchemeYearIntervalsAction}from\"store/modules/waterScheme/getYearIntervals\";import{getWaterSchemeDetailsAction}from\"store/modules/waterScheme/waterSchemeDetails\";import Header from\"./Header/Header\";import Sidebar from\"./Sidebar/Sidebar\";function Dashboard(props){var children=props.children;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sidebarToggle=_useState2[0],setsidebarToggle=_useState2[1];var _useAuthentication=useAuthentication(),isAuthenticated=_useAuthentication.isAuthenticated;var getSchemeDetails=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _window$location$href;var containsSchemeInUrl,route,response,tokenData,_response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:containsSchemeInUrl=window.location.hash.split(\"/\")[1]===\"scheme\";if(!containsSchemeInUrl){_context.next=9;break;}route=window.location.hash.split(\"/\")[2];_context.next=5;return props.getWaterSchemeDetailsAction(route);case 5:response=_context.sent;if(response.data&&response.status!==400){props.updateSchemeNameAction(route);props.getSchemeYearIntervalsAction(props.langauge,route);}else{history.replace(\"/\");}_context.next=18;break;case 9:if(!isAuthenticated()){_context.next=17;break;}tokenData=TokenService.getAccessToken();_context.next=13;return props.getWaterSchemeDetailsAction(tokenData===null||tokenData===void 0?void 0:tokenData.slug);case 13:_response=_context.sent;if(_response.data&&_response.status!==400){props.updateSchemeNameAction(tokenData===null||tokenData===void 0?void 0:tokenData.slug);props.getSchemeYearIntervalsAction(props.langauge,tokenData===null||tokenData===void 0?void 0:tokenData.slug);}_context.next=18;break;case 17:if((_window$location$href=window.location.href)!==null&&_window$location$href!==void 0&&_window$location$href.includes(\"auth\")){history.replace(\"/login\");}else{history.replace(\"/\");}case 18:case\"end\":return _context.stop();}}},_callee);}));return function getSchemeDetails(){return _ref.apply(this,arguments);};}();React.useEffect(function(){if(window.location.hash&&props.langauge){getSchemeDetails();}},[props.langauge,window.location.hash]);return/*#__PURE__*/React.createElement(\"div\",{className:\"app theme-dark-blue \".concat(sidebarToggle?\"toggled\":\"\"),style:{position:\"relative\"}},/*#__PURE__*/React.createElement(Sidebar,{sidebarToggle:sidebarToggle,setsidebarToggle:setsidebarToggle}),/*#__PURE__*/React.createElement(\"main\",{className:\"stickyHeader\"},/*#__PURE__*/React.createElement(Header,{sidebarToggle:sidebarToggle,setsidebarToggle:setsidebarToggle}),/*#__PURE__*/React.createElement(\"div\",{className:\"inner\"},/*#__PURE__*/React.createElement(PrivateRoute,{appRoutes:children,redirectPath:[{to:isAuthenticated()?\"/auth/home\":\"/home\",from:\"*\"}]}))));}var mapStateToProps=function mapStateToProps(state){return{langauge:state.i18nextData.languageType};};var mapDispatchToProps={getWaterSchemeDetailsAction:getWaterSchemeDetailsAction,updateSchemeNameAction:updateSchemeNameAction,getSchemeYearIntervalsAction:getSchemeYearIntervalsAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(Dashboard);","map":null,"metadata":{},"sourceType":"module"}