{"ast":null,"code":"var _jsxFileName = \"E:\\\\Smart Tech Solution\\\\React JS\\\\react-project\\\\src\\\\core\\\\Public\\\\Finance\\\\Visualization\\\\DonoughtChart\\\\index.tsx\",\n    _s = $RefreshSig$();\n\nimport GeneralChart from \"components/UI/Charts/General\";\nimport { GeneralCard } from \"components/UI/GeneralCard\";\nimport { getNumberByLanguage } from \"i18n/i18n\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { connect } from \"react-redux\";\nimport DataTable from \"./DataTable\";\n\nconst DonoughtChart = props => {\n  _s();\n\n  const {\n    t\n  } = useTranslation([\"home\", \"finance\"]);\n  const [incomeDistriBution, setIncomeDisttribution] = useState();\n  const [expenseDistriBution, setExpenseDisttribution] = useState();\n  const [incomeTableData, setIncomeTableData] = useState();\n  const [expenseTableData, setExpenseTableData] = useState();\n\n  const getIncomeCategoryColor = category => {\n    if (String(category).toLocaleLowerCase().includes(\"house\")) {\n      return \"#2680eb\";\n    } else if (String(category).toLocaleLowerCase().includes(\"inst\")) {\n      return \"#69a7f1\";\n    } else if (String(category).toLocaleLowerCase().includes(\"water\")) {\n      return \"#e0efff\";\n    } else if (String(category).toLocaleLowerCase().includes(\"donation\")) {\n      return \"#f4f9ff\";\n    } else {\n      return \"#accef7\";\n    }\n  };\n\n  const getExpenseCategoryColor = category => {\n    console.log(String(category).toLocaleLowerCase(), \"<<<<<<<\");\n\n    if (String(category).toLocaleLowerCase().includes(\"indirect\")) {\n      return \"#f1b369\";\n    } else if (String(category).toLocaleLowerCase().includes(\"direct\")) {\n      return \"#eb9126\";\n    } else if (String(category).toLocaleLowerCase().includes(\"maint\")) {\n      return \"#f7d5ac\";\n    } else {\n      return \"#accef7\";\n    }\n  };\n\n  useEffect(() => {\n    var _props$incomeByCatego, _props$incomeByCatego2, _props$expenseByCateg, _props$expenseByCateg2, _props$incomeByCatego3, _props$expenseByCateg3;\n\n    const seriesIncomeData = {\n      this_year: (_props$incomeByCatego = props.incomeByCategory) === null || _props$incomeByCatego === void 0 ? void 0 : _props$incomeByCatego.income_this_year.map(item => ({\n        value: item.total_amount,\n        name: item.category__name,\n        itemStyle: {\n          color: getIncomeCategoryColor(item.category__name)\n        }\n      })),\n      all_time: (_props$incomeByCatego2 = props.incomeByCategory) === null || _props$incomeByCatego2 === void 0 ? void 0 : _props$incomeByCatego2.income_all_time.map(item => ({\n        value: item.total_amount,\n        name: item.category__name,\n        itemStyle: {\n          color: getIncomeCategoryColor(item.category__name)\n        }\n      }))\n    };\n    const seriesExpenseData = {\n      this_year: (_props$expenseByCateg = props.expenseByCategory) === null || _props$expenseByCateg === void 0 ? void 0 : _props$expenseByCateg.expense_this_year.map(item => ({\n        value: item.total_amount,\n        name: item.category__name,\n        itemStyle: {\n          color: getExpenseCategoryColor(item.category__name)\n        }\n      })),\n      all_time: (_props$expenseByCateg2 = props.expenseByCategory) === null || _props$expenseByCateg2 === void 0 ? void 0 : _props$expenseByCateg2.expense_all_time.map(item => ({\n        value: item.total_amount,\n        name: item.category__name,\n        itemStyle: {\n          color: getExpenseCategoryColor(item.category__name)\n        }\n      }))\n    };\n    const incomeTableData = (_props$incomeByCatego3 = props.incomeByCategory) === null || _props$incomeByCatego3 === void 0 ? void 0 : _props$incomeByCatego3.income_this_year.map(item => {\n      var _props$incomeByCatego4, _props$incomeByCatego5;\n\n      return {\n        name: item.category__name,\n        value: {\n          this_year: item.total_amount,\n          all_time: (_props$incomeByCatego4 = props.incomeByCategory) === null || _props$incomeByCatego4 === void 0 ? void 0 : (_props$incomeByCatego5 = _props$incomeByCatego4.income_all_time.find(income => income.category__name === item.category__name)) === null || _props$incomeByCatego5 === void 0 ? void 0 : _props$incomeByCatego5.total_amount\n        }\n      };\n    });\n    const expenseTableData = (_props$expenseByCateg3 = props.expenseByCategory) === null || _props$expenseByCateg3 === void 0 ? void 0 : _props$expenseByCateg3.expense_this_year.map(item => {\n      var _props$expenseByCateg4, _props$expenseByCateg5;\n\n      return {\n        name: item.category__name,\n        value: {\n          this_year: item.total_amount,\n          all_time: (_props$expenseByCateg4 = props.expenseByCategory) === null || _props$expenseByCateg4 === void 0 ? void 0 : (_props$expenseByCateg5 = _props$expenseByCateg4.expense_all_time.find(income => income.category__name === item.category__name)) === null || _props$expenseByCateg5 === void 0 ? void 0 : _props$expenseByCateg5.total_amount\n        }\n      };\n    });\n    setIncomeTableData(incomeTableData);\n    setExpenseTableData(expenseTableData);\n    setIncomeDisttribution(seriesIncomeData);\n    setExpenseDisttribution(seriesExpenseData);\n  }, [props.incomeByCategory, props.expenseByCategory]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GeneralCard, {\n    title: t(\"home:incomeDistribution\"),\n    className: \"mr-md-3 mt-2\",\n    print: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(GeneralChart, {\n    minHeight: 250,\n    options: {\n      tooltip: {\n        trigger: \"item\",\n        formatter: `{a} <br/>{b} : {c} ({d}%)`\n      },\n      legend: {\n        bottom: \"bottom\",\n        // top: \"10%\",\n        // orient: \"vertical\",\n        formatter: \"{name}\"\n      },\n      series: [{\n        name: t(\"home:thisYear\"),\n        type: \"pie\",\n        radius: [\"55%\", \"65%\"],\n        center: [\"25%\", \"45%\"],\n        label: {\n          show: true,\n          position: \"center\",\n          formatter: function () {\n            var _incomeDistriBution$t;\n\n            return `${props.currency}  ${getNumberByLanguage(incomeDistriBution === null || incomeDistriBution === void 0 ? void 0 : (_incomeDistriBution$t = incomeDistriBution.this_year) === null || _incomeDistriBution$t === void 0 ? void 0 : _incomeDistriBution$t.reduce((sum, acc) => sum + (acc.value || 0), 0)) || 0}`;\n          }\n        },\n        data: incomeDistriBution === null || incomeDistriBution === void 0 ? void 0 : incomeDistriBution.this_year\n      }, {\n        name: t(\"home:allTime\"),\n        type: \"pie\",\n        radius: [\"55%\", \"65%\"],\n        center: [\"75%\", \"45%\"],\n        label: {\n          show: true,\n          position: \"center\",\n          formatter: function () {\n            var _incomeDistriBution$a;\n\n            return `${props.currency}  ${getNumberByLanguage(incomeDistriBution === null || incomeDistriBution === void 0 ? void 0 : (_incomeDistriBution$a = incomeDistriBution.all_time) === null || _incomeDistriBution$a === void 0 ? void 0 : _incomeDistriBution$a.reduce((sum, acc) => sum + (acc.value || 0), 0)) || 0}`;\n          }\n        },\n        data: incomeDistriBution === null || incomeDistriBution === void 0 ? void 0 : incomeDistriBution.all_time\n      }]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    tableData: incomeTableData,\n    headers: [t(\"home:thisYear\"), t(\"home:allTime\")],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GeneralCard, {\n    title: t(\"home:expenditureDistribution\"),\n    className: \"ml-md-3  mt-2\",\n    print: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(GeneralChart, {\n    minHeight: 250,\n    options: {\n      tooltip: {\n        trigger: \"item\",\n        formatter: \"{a} <br/>{b} : {c} ({d}%)\"\n      },\n      legend: {\n        bottom: \"bottom\",\n        // top: \"10%\",\n        // orient: \"vertical\",\n        formatter: \"{name}\"\n      },\n      series: [{\n        name: t(\"home:thisYear\"),\n        type: \"pie\",\n        radius: [\"55%\", \"65%\"],\n        center: [\"25%\", \"45%\"],\n        //   itemStyle: {\n        //     borderRadius: 5,\n        //   },\n        label: {\n          show: true,\n          position: \"center\",\n          formatter: function () {\n            var _expenseDistriBution$;\n\n            return `${props.currency}  ${getNumberByLanguage((expenseDistriBution === null || expenseDistriBution === void 0 ? void 0 : (_expenseDistriBution$ = expenseDistriBution.this_year) === null || _expenseDistriBution$ === void 0 ? void 0 : _expenseDistriBution$.reduce((sum, acc) => sum + (acc.value || 0), 0)) || 0)}`;\n          }\n        },\n        data: expenseDistriBution === null || expenseDistriBution === void 0 ? void 0 : expenseDistriBution.this_year\n      }, {\n        name: t(\"home:allTime\"),\n        type: \"pie\",\n        radius: [\"55%\", \"65%\"],\n        center: [\"75%\", \"45%\"],\n        //   itemStyle: {\n        //     borderRadius: 5,\n        //   },\n        label: {\n          show: true,\n          position: \"center\",\n          formatter: function () {\n            var _expenseDistriBution$2;\n\n            return `  ${props.currency}  ${getNumberByLanguage((expenseDistriBution === null || expenseDistriBution === void 0 ? void 0 : (_expenseDistriBution$2 = expenseDistriBution.all_time) === null || _expenseDistriBution$2 === void 0 ? void 0 : _expenseDistriBution$2.reduce((sum, acc) => sum + (acc.value || 0), 0)) || 0)}`;\n          }\n        },\n        data: expenseDistriBution === null || expenseDistriBution === void 0 ? void 0 : expenseDistriBution.all_time\n      }]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(DataTable, {\n    tableData: expenseTableData,\n    headers: [t(\"home:thisYear\"), t(\"home:allTime\")],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }))));\n};\n\n_s(DonoughtChart, \"L9SFRu5fD74kQ3utDEBil1tgk1s=\", false, function () {\n  return [useTranslation];\n});\n\n_c = DonoughtChart;\n\nconst mapStateToProps = state => {\n  var _state$waterSchemeDat;\n\n  return {\n    language: state.i18nextData.languageType,\n    incomeByCategory: state.reportData.incomeByCategoryData.data,\n    expenseByCategory: state.reportData.expenseByCategoryData.data,\n    currency: (_state$waterSchemeDat = state.waterSchemeData.waterSchemeDetailsData.data) === null || _state$waterSchemeDat === void 0 ? void 0 : _state$waterSchemeDat.currency\n  };\n};\n\nconst mapDispatchToProps = {};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport default _c2 = connector(DonoughtChart);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DonoughtChart\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["E:/Smart Tech Solution/React JS/react-project/src/core/Public/Finance/Visualization/DonoughtChart/index.tsx"],"names":["GeneralChart","GeneralCard","getNumberByLanguage","React","useEffect","useState","useTranslation","connect","DataTable","DonoughtChart","props","t","incomeDistriBution","setIncomeDisttribution","expenseDistriBution","setExpenseDisttribution","incomeTableData","setIncomeTableData","expenseTableData","setExpenseTableData","getIncomeCategoryColor","category","String","toLocaleLowerCase","includes","getExpenseCategoryColor","console","log","seriesIncomeData","this_year","incomeByCategory","income_this_year","map","item","value","total_amount","name","category__name","itemStyle","color","all_time","income_all_time","seriesExpenseData","expenseByCategory","expense_this_year","expense_all_time","find","income","tooltip","trigger","formatter","legend","bottom","series","type","radius","center","label","show","position","currency","reduce","sum","acc","data","mapStateToProps","state","language","i18nextData","languageType","reportData","incomeByCategoryData","expenseByCategoryData","waterSchemeData","waterSchemeDetailsData","mapDispatchToProps","connector"],"mappings":"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","sourcesContent":["import GeneralChart from \"components/UI/Charts/General\";\r\nimport { GeneralCard } from \"components/UI/GeneralCard\";\r\nimport { getNumberByLanguage } from \"i18n/i18n\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { RootState } from \"store/root-reducer\";\r\nimport DataTable from \"./DataTable\";\r\n\r\ntype IncomeExponeseDistribution = {\r\n  this_year: { value: number; name: string }[];\r\n  all_time: { value: number; name: string }[];\r\n};\r\n\r\ninterface Props extends PropsFromRedux {}\r\n\r\nconst DonoughtChart = (props: Props) => {\r\n  const { t } = useTranslation([\"home\", \"finance\"]);\r\n\r\n  const [incomeDistriBution, setIncomeDisttribution] = useState<IncomeExponeseDistribution>();\r\n  const [expenseDistriBution, setExpenseDisttribution] = useState<IncomeExponeseDistribution>();\r\n\r\n  const [incomeTableData, setIncomeTableData] = useState<any>();\r\n  const [expenseTableData, setExpenseTableData] = useState<any>();\r\n\r\n  const getIncomeCategoryColor = (category) => {\r\n    if (String(category).toLocaleLowerCase().includes(\"house\")) {\r\n      return \"#2680eb\";\r\n    } else if (String(category).toLocaleLowerCase().includes(\"inst\")) {\r\n      return \"#69a7f1\";\r\n    } else if (String(category).toLocaleLowerCase().includes(\"water\")) {\r\n      return \"#e0efff\";\r\n    } else if (String(category).toLocaleLowerCase().includes(\"donation\")) {\r\n      return \"#f4f9ff\";\r\n    } else {\r\n      return \"#accef7\";\r\n    }\r\n  };\r\n\r\n  const getExpenseCategoryColor = (category) => {\r\n    console.log(String(category).toLocaleLowerCase(), \"<<<<<<<\");\r\n\r\n    if (String(category).toLocaleLowerCase().includes(\"indirect\")) {\r\n      return \"#f1b369\";\r\n    } else if (String(category).toLocaleLowerCase().includes(\"direct\")) {\r\n      return \"#eb9126\";\r\n    } else if (String(category).toLocaleLowerCase().includes(\"maint\")) {\r\n      return \"#f7d5ac\";\r\n    } else {\r\n      return \"#accef7\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const seriesIncomeData: IncomeExponeseDistribution = {\r\n      this_year: props.incomeByCategory?.income_this_year.map((item) => ({\r\n        value: item.total_amount,\r\n        name: item.category__name,\r\n        itemStyle: { color: getIncomeCategoryColor(item.category__name) },\r\n      })),\r\n      all_time: props.incomeByCategory?.income_all_time.map((item) => ({\r\n        value: item.total_amount,\r\n        name: item.category__name,\r\n        itemStyle: { color: getIncomeCategoryColor(item.category__name) },\r\n      })),\r\n    };\r\n    const seriesExpenseData: IncomeExponeseDistribution = {\r\n      this_year: props.expenseByCategory?.expense_this_year.map((item) => ({\r\n        value: item.total_amount,\r\n        name: item.category__name,\r\n        itemStyle: { color: getExpenseCategoryColor(item.category__name) },\r\n      })),\r\n      all_time: props.expenseByCategory?.expense_all_time.map((item) => ({\r\n        value: item.total_amount,\r\n        name: item.category__name,\r\n        itemStyle: { color: getExpenseCategoryColor(item.category__name) },\r\n      })),\r\n    };\r\n\r\n    const incomeTableData = props.incomeByCategory?.income_this_year.map((item) => ({\r\n      name: item.category__name,\r\n      value: {\r\n        this_year: item.total_amount,\r\n        all_time: props.incomeByCategory?.income_all_time.find(\r\n          (income) => income.category__name === item.category__name\r\n        )?.total_amount,\r\n      },\r\n    }));\r\n    const expenseTableData = props.expenseByCategory?.expense_this_year.map((item) => ({\r\n      name: item.category__name,\r\n      value: {\r\n        this_year: item.total_amount,\r\n        all_time: props.expenseByCategory?.expense_all_time.find(\r\n          (income) => income.category__name === item.category__name\r\n        )?.total_amount,\r\n      },\r\n    }));\r\n\r\n    setIncomeTableData(incomeTableData);\r\n    setExpenseTableData(expenseTableData);\r\n\r\n    setIncomeDisttribution(seriesIncomeData);\r\n    setExpenseDisttribution(seriesExpenseData);\r\n  }, [props.incomeByCategory, props.expenseByCategory]);\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-lg-6\">\r\n        <GeneralCard title={t(\"home:incomeDistribution\")} className=\"mr-md-3 mt-2\" print={true}>\r\n          <GeneralChart\r\n            minHeight={250}\r\n            options={{\r\n              tooltip: {\r\n                trigger: \"item\",\r\n                formatter: `{a} <br/>{b} : {c} ({d}%)`,\r\n              },\r\n              legend: {\r\n                bottom: \"bottom\",\r\n                // top: \"10%\",\r\n                // orient: \"vertical\",\r\n                formatter: \"{name}\",\r\n              },\r\n\r\n              series: [\r\n                {\r\n                  name: t(\"home:thisYear\"),\r\n                  type: \"pie\",\r\n                  radius: [\"55%\", \"65%\"],\r\n                  center: [\"25%\", \"45%\"],\r\n                  label: {\r\n                    show: true,\r\n                    position: \"center\",\r\n                    formatter: function () {\r\n                      return `${props.currency}  ${\r\n                        getNumberByLanguage(\r\n                          incomeDistriBution?.this_year?.reduce(\r\n                            (sum: any, acc) => sum + (acc.value || 0),\r\n                            0\r\n                          )\r\n                        ) || 0\r\n                      }`;\r\n                    },\r\n                  },\r\n                  data: incomeDistriBution?.this_year,\r\n                },\r\n                {\r\n                  name: t(\"home:allTime\"),\r\n                  type: \"pie\",\r\n                  radius: [\"55%\", \"65%\"],\r\n                  center: [\"75%\", \"45%\"],\r\n                  label: {\r\n                    show: true,\r\n                    position: \"center\",\r\n                    formatter: function () {\r\n                      return `${props.currency}  ${\r\n                        getNumberByLanguage(\r\n                          incomeDistriBution?.all_time?.reduce(\r\n                            (sum: any, acc) => sum + (acc.value || 0),\r\n                            0\r\n                          )\r\n                        ) || 0\r\n                      }`;\r\n                    },\r\n                  },\r\n                  data: incomeDistriBution?.all_time,\r\n                },\r\n              ],\r\n            }}\r\n          />\r\n          <DataTable\r\n            tableData={incomeTableData}\r\n            headers={[t(\"home:thisYear\"), t(\"home:allTime\")]}\r\n          />\r\n        </GeneralCard>\r\n      </div>\r\n      <div className=\"col-lg-6\">\r\n        <GeneralCard\r\n          title={t(\"home:expenditureDistribution\")}\r\n          className=\"ml-md-3  mt-2\"\r\n          print={true}\r\n        >\r\n          <GeneralChart\r\n            minHeight={250}\r\n            options={{\r\n              tooltip: {\r\n                trigger: \"item\",\r\n                formatter: \"{a} <br/>{b} : {c} ({d}%)\",\r\n              },\r\n              legend: {\r\n                bottom: \"bottom\",\r\n                // top: \"10%\",\r\n                // orient: \"vertical\",\r\n                formatter: \"{name}\",\r\n              },\r\n\r\n              series: [\r\n                {\r\n                  name: t(\"home:thisYear\"),\r\n                  type: \"pie\",\r\n                  radius: [\"55%\", \"65%\"],\r\n                  center: [\"25%\", \"45%\"],\r\n                  //   itemStyle: {\r\n                  //     borderRadius: 5,\r\n                  //   },\r\n                  label: {\r\n                    show: true,\r\n                    position: \"center\",\r\n                    formatter: function () {\r\n                      return `${props.currency}  ${getNumberByLanguage(\r\n                        expenseDistriBution?.this_year?.reduce(\r\n                          (sum: any, acc) => sum + (acc.value || 0),\r\n                          0\r\n                        ) || 0\r\n                      )}`;\r\n                    },\r\n                  },\r\n\r\n                  data: expenseDistriBution?.this_year,\r\n                },\r\n                {\r\n                  name: t(\"home:allTime\"),\r\n                  type: \"pie\",\r\n                  radius: [\"55%\", \"65%\"],\r\n                  center: [\"75%\", \"45%\"],\r\n                  //   itemStyle: {\r\n                  //     borderRadius: 5,\r\n                  //   },\r\n                  label: {\r\n                    show: true,\r\n                    position: \"center\",\r\n                    formatter: function () {\r\n                      return `  ${props.currency}  ${getNumberByLanguage(\r\n                        expenseDistriBution?.all_time?.reduce(\r\n                          (sum: any, acc) => sum + (acc.value || 0),\r\n                          0\r\n                        ) || 0\r\n                      )}`;\r\n                    },\r\n                  },\r\n                  data: expenseDistriBution?.all_time,\r\n                },\r\n              ],\r\n            }}\r\n          />\r\n          <DataTable\r\n            tableData={expenseTableData}\r\n            headers={[t(\"home:thisYear\"), t(\"home:allTime\")]}\r\n          />\r\n        </GeneralCard>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  language: state.i18nextData.languageType,\r\n  incomeByCategory: state.reportData.incomeByCategoryData.data,\r\n  expenseByCategory: state.reportData.expenseByCategoryData.data,\r\n  currency: state.waterSchemeData.waterSchemeDetailsData.data?.currency,\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(DonoughtChart);\r\n"]},"metadata":{},"sourceType":"module"}