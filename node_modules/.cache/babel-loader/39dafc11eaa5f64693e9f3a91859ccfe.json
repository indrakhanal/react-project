{"ast":null,"code":"import _objectSpread from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import FormikValidationError from\"components/React/FormikValidationError/FormikValidationError\";import StyledSelect from\"components/React/StyledSelect/StyledSelect\";import toast from\"components/React/ToastNotifier/ToastNotifier\";import{useFormik}from\"formik\";import React from\"react\";import{connect}from\"react-redux\";import{getInflationParametersAction}from\"store/modules/inflationParameters/getInflationParameters\";import{postInflationParametersAction}from\"store/modules/inflationParameters/postInflationParameters\";import{updateInflationparametersAction}from\"store/modules/inflationParameters/updateInflationParameters\";import*as Yup from\"yup\";import{useTranslation}from\"react-i18next\";import TooltipLabel from\"components/UI/TooltipLabel\";var validationSchema=Yup.object({rate:Yup.string().required(\"This field is required\"),dis_allow_edit:Yup.mixed().nullable().required(\"This field is required\")});var InflationParameters=function InflationParameters(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _React$useState=React.useState({rate:0,dis_allow_edit:null}),_React$useState2=_slicedToArray(_React$useState,2),initialData=_React$useState2[0],setInitialData=_React$useState2[1];React.useEffect(function(){if(props.language){props.getInflationParametersAction(props.language);}},[props.language]);var _useFormik=useFormik({enableReinitialize:true,initialValues:initialData,validationSchema:validationSchema,onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values,_ref){var _values$dis_allow_edi,_props$inflationParam;var resetForm,response,requestData,editData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:resetForm=_ref.resetForm;requestData=_objectSpread(_objectSpread({},values),{},{dis_allow_edit:values===null||values===void 0?void 0:(_values$dis_allow_edi=values.dis_allow_edit)===null||_values$dis_allow_edi===void 0?void 0:_values$dis_allow_edi.value});if(!(props.inflationParametersList instanceof Array&&((_props$inflationParam=props.inflationParametersList)===null||_props$inflationParam===void 0?void 0:_props$inflationParam.length)>0)){_context.next=9;break;}editData=props.inflationParametersList[0];_context.next=6;return props.updateInflationparametersAction(props.language,editData.id,requestData);case 6:response=_context.sent;_context.next=12;break;case 9:_context.next=11;return props.postInflationParametersAction(props.language,requestData);case 11:response=_context.sent;case 12:if(response.status===201||response.status===200){if(response.status===201){resetForm();toast.success(t(\"home:postSuccess\"));}else{setInitialData({rate:0,dis_allow_edit:null});toast.success(t(\"home:updateSuccess\"));}props.getInflationParametersAction(props.language);}case 13:case\"end\":return _context.stop();}}},_callee);}));function onSubmit(_x,_x2){return _onSubmit.apply(this,arguments);}return onSubmit;}()}),values=_useFormik.values,errors=_useFormik.errors,touched=_useFormik.touched,setFieldTouched=_useFormik.setFieldTouched,setFieldValue=_useFormik.setFieldValue,handleChange=_useFormik.handleChange,handleBlur=_useFormik.handleBlur,handleSubmit=_useFormik.handleSubmit;React.useEffect(function(){var _props$inflationParam2;if(props.inflationParametersList instanceof Array&&((_props$inflationParam2=props.inflationParametersList)===null||_props$inflationParam2===void 0?void 0:_props$inflationParam2.length)>0){var editData=props.inflationParametersList[0];setInitialData(_objectSpread(_objectSpread({},editData),{},{dis_allow_edit:editData!==null&&editData!==void 0&&editData.dis_allow_edit?{label:\"Yes\",value:true}:{label:\"No\",value:false}}));}},[props.inflationParametersList]);console.log(props.inflationParametersList,\"inflationParametersList\");return/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();handleSubmit(e);}},/*#__PURE__*/React.createElement(\"div\",{className:\"row rate_form align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"\",className:\"mr-1\"},t(\"finance:daeams\"),\" \",/*#__PURE__*/React.createElement(TooltipLabel,{id:\"twatm\",text:\"This will affect  the Mobile App's Cashbook month Closing\"}),\":\"),/*#__PURE__*/React.createElement(StyledSelect,{name:\"dis_allow_edit\",options:[{label:\"Yes\",value:true},{label:\"No\",value:false}],value:values.dis_allow_edit,onChange:function onChange(_ref2){var name=_ref2.name,value=_ref2.value;setFieldValue(name,value);handleSubmit();},onBlur:function onBlur(){setFieldTouched(\"dis_allow_edit\",true);}}),/*#__PURE__*/React.createElement(FormikValidationError,{name:\"dis_allow_edit\",errors:errors,touched:touched})))));};var mapStateToProps=function mapStateToProps(state){return{language:state.i18nextData.languageType,postLoading:state.inflationParametersData.postInflationParameters.isFetching,updateLoading:state.inflationParametersData.postInflationParameters.isFetching,inflationParametersList:state.inflationParametersData.getInflationParameters.data};};var mapDispatchToProps={postInflationParametersAction:postInflationParametersAction,updateInflationparametersAction:updateInflationparametersAction,getInflationParametersAction:getInflationParametersAction};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(InflationParameters);","map":null,"metadata":{},"sourceType":"module"}