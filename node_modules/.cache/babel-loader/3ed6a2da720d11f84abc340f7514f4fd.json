{"ast":null,"code":"import _slicedToArray from\"C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import GeneralChart from\"components/UI/Charts/General\";import{getFiscalYearData,getMonthByLanguageAndScheme,getNumberByLanguage}from\"i18n/i18n\";import React,{useEffect,useState}from\"react\";import{useTranslation}from\"react-i18next\";import{connect}from\"react-redux\";var MaintainanceCostChartThisYear=function MaintainanceCostChartThisYear(props){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState(),_useState2=_slicedToArray(_useState,2),year=_useState2[0],setYear=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),actualCost=_useState4[0],setActualCost=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),expectedCost=_useState6[0],setExpectedCost=_useState6[1];useEffect(function(){if(props.maintainanceCost&&props.intervalData){var _props$schemeDetails;var fiscalYearArray=getFiscalYearData(props.intervalData,(_props$schemeDetails=props.schemeDetails)===null||_props$schemeDetails===void 0?void 0:_props$schemeDetails.system_date_format);var sortAndMapArray=function sortAndMapArray(array,monthKey,key,color){return fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var findElement=array===null||array===void 0?void 0:array.find(function(inc){var _inc$monthKey,_inc$monthKey$toStrin;return+inc[monthKey]<10?+((_inc$monthKey=inc[monthKey])===null||_inc$monthKey===void 0?void 0:(_inc$monthKey$toStrin=_inc$monthKey.toString())===null||_inc$monthKey$toStrin===void 0?void 0:_inc$monthKey$toStrin.replace(\"0\",\"\"))===+item:+inc[monthKey]===+item;});return{value:findElement?findElement[key]:0,itemStyle:{color:color}};});};var yearData=fiscalYearArray===null||fiscalYearArray===void 0?void 0:fiscalYearArray.map(function(item){var _props$schemeDetails2;return getMonthByLanguageAndScheme(item,(_props$schemeDetails2=props.schemeDetails)===null||_props$schemeDetails2===void 0?void 0:_props$schemeDetails2.system_date_format);});var _actualCost={unsegregated:sortAndMapArray(props.maintainanceCost.actual_cost,\"maintenance_date__month\",\"unsegregated_cost\",\"#e69f00\"),material:sortAndMapArray(props.maintainanceCost.actual_cost,\"maintenance_date__month\",\"material_cost\",\"#56b4e9\"),labor:sortAndMapArray(props.maintainanceCost.actual_cost,\"maintenance_date__month\",\"labour_cost\",\"#f0e442\"),replacement:sortAndMapArray(props.maintainanceCost.actual_cost,\"maintenance_date__month\",\"replacement_cost\",\"#ea75b6\"),total:props.maintainanceCost.actual_cost.map(function(item){return{date:item.maintenance_date__month,value:item.actual_cost_total||0};})};var _expectedCost={unsegregated:sortAndMapArray(props.maintainanceCost.expected_cost,\"next_action__month\",\"unsegregated_cost\",\"#009e73\"),material:sortAndMapArray(props.maintainanceCost.expected_cost,\"next_action__month\",\"material_cost\",\"#000000\"),labor:sortAndMapArray(props.maintainanceCost.expected_cost,\"next_action__month\",\"labour_cost\",\"#d55e00\"),replacement:sortAndMapArray(props.maintainanceCost.expected_cost,\"next_action__month\",\"replacement_cost\",\"#0072b2\"),total:props.maintainanceCost.expected_cost.map(function(item){return{date:item.maintenance_date__month,value:item.actual_cost_total||0};})};setYear(yearData);setActualCost(_actualCost);setExpectedCost(_expectedCost);}},[props.maintainanceCost,props.intervalData]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(GeneralChart,{minHeight:350,options:{tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}// formatter: handleCustomTooltip,\n},legend:{show:false},grid:{left:\"3%\",right:\"4%\",bottom:\"3%\",top:\"8%\",containLabel:true},xAxis:{type:\"category\",data:year,axisLabel:{formatter:function formatter(data){return(data===null||data===void 0?void 0:data.replace(\"Year\",\"\"))||\" \";}}},yAxis:{type:\"value\",axisLabel:{formatter:function formatter(name){return getNumberByLanguage(name);}}},series:[{name:\"\".concat(t(\"home:expected\"),\" \").concat(t(\"home:unsegregated\")),type:\"bar\",stack:\"bar\",areaStyle:{color:\"red\"},data:expectedCost===null||expectedCost===void 0?void 0:expectedCost.unsegregated},{name:\"\".concat(t(\"home:expected\"),\" \").concat(t(\"home:consumable\")),type:\"bar\",stack:\"bar\",data:expectedCost===null||expectedCost===void 0?void 0:expectedCost.material},{name:\"\".concat(t(\"home:expected\"),\" \").concat(t(\"home:labour\")),type:\"bar\",stack:\"bar\",data:expectedCost===null||expectedCost===void 0?void 0:expectedCost.labor},{name:\"\".concat(t(\"home:expected\"),\" \").concat(t(\"home:replacement\")),type:\"bar\",stack:\"bar\",data:expectedCost===null||expectedCost===void 0?void 0:expectedCost.labor},{name:\"\".concat(t(\"home:actual\"),\" \").concat(t(\"home:unsegregated\")),type:\"bar\",stack:\"bar2\",data:actualCost===null||actualCost===void 0?void 0:actualCost.unsegregated},{name:\"\".concat(t(\"home:actual\"),\" \").concat(t(\"home:consumable\")),type:\"bar\",stack:\"bar2\",data:actualCost===null||actualCost===void 0?void 0:actualCost.material},{name:\"\".concat(t(\"home:actual\"),\" \").concat(t(\"home:labour\")),type:\"bar\",stack:\"bar2\",data:actualCost===null||actualCost===void 0?void 0:actualCost.labor},{name:\"\".concat(t(\"home:actual\"),\" \").concat(t(\"home:replacement\")),type:\"bar\",stack:\"bar2\",data:actualCost===null||actualCost===void 0?void 0:actualCost.replacement}]}}),/*#__PURE__*/React.createElement(\"div\",{className:\"cost-desc table-responsive mt-4\"},/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"expected\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h5\",null,t(\"home:expectedCost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"unseg\"}),t(\"home:unsegregated\"),\" \",t(\"home:cost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"material\"}),t(\"home:maintainanceCost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"labour\"}),t(\"home:labour\"),\" \",t(\"home:cost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"replacement\"}),t(\"home:replacement\"),\" \",t(\"home:cost\")))),/*#__PURE__*/React.createElement(\"tr\",{className:\"actual\"},/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h5\",null,t(\"home:actualCost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"unseg\"}),t(\"home:unsegregated\"),\" \",t(\"home:cost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"material\"}),t(\"home:maintainanceCost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"labour\"}),t(\"home:labour\"),\" \",t(\"home:cost\"))),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"h6\",null,/*#__PURE__*/React.createElement(\"span\",{className:\"replacement\"}),t(\"home:replacement\"),\" \",t(\"home:cost\")))))));};var mapStateToProps=function mapStateToProps(state){return{schemeDetails:state.waterSchemeData.waterSchemeDetailsData.data,language:state.i18nextData.languageType,maintainanceCost:state.reportData.maintainanceCostData.data,waterTarrifs:state.waterTarrifsData.waterTarrifData.data,intervalData:state.waterSchemeData.getYearIntervals.data};};var mapDispatchToProps={};var connector=connect(mapStateToProps,mapDispatchToProps);export default connector(MaintainanceCostChartThisYear);","map":null,"metadata":{},"sourceType":"module"}