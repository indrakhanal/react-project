{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\S.K. COMPUTER\\\\OneDrive\\\\Desktop\\\\react-project\\\\src\\\\core\\\\Public\\\\Service\\\\WaterTestResults\\\\VisualizationGraph.tsx\",\n    _s = $RefreshSig$();\n\nimport GeneralChart from \"components/UI/Charts/General\";\nimport CustomCheckBox from \"components/UI/CustomCheckbox\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { chartConfig } from \"./configData\";\n\nconst LineChart = props => {\n  _s();\n\n  const [testParams, setTestParams] = useState();\n  const [selected, setSelected] = useState([]);\n  const [chartData, setChartData] = useState();\n  const [seriesData, setSeriesData] = useState();\n  const [otherSeriesData, setOtherSeriesData] = useState(); // const [tableData, setTableData] = useState<any>();\n\n  useEffect(() => {\n    if (props.testParams) {\n      const params = {\n        chemical: props.testParams.filter(item => item.types === \"Chemical\"),\n        others: props.testParams.filter(item => item.types === \"Other\")\n      };\n      setTestParams(params);\n    }\n  }, [props.testParams]);\n  useEffect(() => {\n    if (props.testResult && props.testResult[0]) {\n      const newData = {\n        xAxis: props.testResult.map(item => `${props.type} ${item[props.compareKey]}`)\n      };\n      setChartData(newData);\n    }\n  }, [props.testResult]);\n\n  const handleSelect = name => {\n    if (selected !== null && selected !== void 0 && selected.includes(name)) {\n      const filteredData = selected.filter(item => item !== name);\n      setSelected(filteredData);\n    } else {\n      setSelected([...selected, name]);\n    }\n  };\n\n  useEffect(() => {\n    const chemicalSeries = [];\n    const otherCharts = [];\n    selected.forEach((item, index) => {\n      var _props$testParams;\n\n      const testParam = (_props$testParams = props.testParams) === null || _props$testParams === void 0 ? void 0 : _props$testParams.find(param => param.parameter_name === item);\n\n      if ((testParam === null || testParam === void 0 ? void 0 : testParam.types) === \"Chemical\") {\n        chemicalSeries.push({\n          name: testParam === null || testParam === void 0 ? void 0 : testParam.parameter_name,\n          type: \"line\",\n          smooth: true,\n          data: props.testResult.map(item => {\n            var _item$data, _item$data$find;\n\n            return ((_item$data = item.data) === null || _item$data === void 0 ? void 0 : (_item$data$find = _item$data.find(single => single.parameter__parameter_name === (testParam === null || testParam === void 0 ? void 0 : testParam.parameter_name))) === null || _item$data$find === void 0 ? void 0 : _item$data$find.total_value) || 0;\n          })\n        });\n      } else {\n        var _props$testResult;\n\n        const newChart = Object.assign({}, { ...chartConfig,\n          xAxis: {\n            type: \"category\",\n            boundaryGap: false,\n            data: chartData === null || chartData === void 0 ? void 0 : chartData.xAxis,\n            axisLabel: {\n              formatter: function (name) {\n                return name === null || name === void 0 ? void 0 : name.replace(props.type, \"\");\n              }\n            }\n          },\n          series: [{\n            name: testParam === null || testParam === void 0 ? void 0 : testParam.parameter_name,\n            type: \"line\",\n            smooth: true,\n            data: (_props$testResult = props.testResult) === null || _props$testResult === void 0 ? void 0 : _props$testResult.map(item => {\n              var _item$data2, _item$data2$find;\n\n              return ((_item$data2 = item.data) === null || _item$data2 === void 0 ? void 0 : (_item$data2$find = _item$data2.find(single => single.parameter__parameter_name === (testParam === null || testParam === void 0 ? void 0 : testParam.parameter_name))) === null || _item$data2$find === void 0 ? void 0 : _item$data2$find.total_value) || 0;\n            })\n          }]\n        });\n        otherCharts.push(newChart);\n      }\n    });\n    setSeriesData(chemicalSeries);\n    setOtherSeriesData(otherCharts);\n    console.log(props.testParams, \"**********\"); // const selectedData = selected.map((item) => ({\n    //   ...config,\n    //   name: props.options.find((opt) => opt.id === item)?.name || \"\",\n    //   data: chartData && chartData[item],\n    //   itemStyle: {\n    //     color: props.options.find((opt) => opt.id === item)?.color || \"\",\n    //   },\n    // }));\n    // const tableData = selected.map((item) => ({\n    //   name: props.options.find((opt) => opt.id === item)?.name || \"\",\n    //   color: props.options.find((opt) => opt.id === item)?.color || \"\",\n    //   data: chartData && chartData[item],\n    // }));\n    // setSeriesData(selectedData);\n    // setTableData(tableData);\n  }, [chartData, selected]);\n  const chemicalSeriesOptionData = {\n    tooltip: {\n      trigger: \"axis\",\n      axisPointer: {\n        type: \"shadow\"\n      }\n    },\n    legend: {\n      show: true\n    },\n    grid: {\n      left: \"3%\",\n      right: \"5%\",\n      bottom: \"3%\",\n      //   top: \"6%\",\n      containLabel: true\n    },\n    xAxis: {\n      type: \"category\",\n      boundaryGap: false,\n      data: chartData === null || chartData === void 0 ? void 0 : chartData.xAxis,\n      axisLabel: {\n        formatter: function (name) {\n          return name === null || name === void 0 ? void 0 : name.replace(props.type, \"\");\n        }\n      }\n    },\n    yAxis: {\n      type: \"value\"\n    },\n    series: seriesData\n  };\n  console.log(chartData, \"seeeflleede\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(GeneralChart, {\n    minHeight: 400,\n    options: chemicalSeriesOptionData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }), otherSeriesData && otherSeriesData.map(item => /*#__PURE__*/React.createElement(GeneralChart, {\n    minHeight: 400,\n    options: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 41\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-3 chartOptions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }\n  }, \"Select\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }, \"Chemicals\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 9\n    }\n  }, testParams === null || testParams === void 0 ? void 0 : testParams.chemical.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CustomCheckBox, {\n    id: \"\" + item.id,\n    label: item.parameter_name,\n    onChange: e => handleSelect(\"\" + item.parameter_name),\n    checked: selected.includes(\"\" + item.parameter_name),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }, \"Others\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, testParams === null || testParams === void 0 ? void 0 : testParams.others.map(item => /*#__PURE__*/React.createElement(\"li\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CustomCheckBox, {\n    id: \"\" + item.id,\n    label: item.parameter_name,\n    onChange: e => handleSelect(\"\" + item.parameter_name),\n    checked: selected.includes(\"\" + item.parameter_name),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }))))));\n};\n\n_s(LineChart, \"W8PYN4b/MBMS+H+HFNmJatUTaik=\");\n\n_c = LineChart;\n\nconst mapStateToProps = state => ({\n  language: state.i18nextData.languageType,\n  testParams: state.testParamtersData.testParametersData.data,\n  testResult: state.reportData.waterTestResultsData.data\n});\n\nconst mapDispatchToProps = {};\nconst connector = connect(mapStateToProps, mapDispatchToProps);\nexport default _c2 = connector(LineChart);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LineChart\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/S.K. COMPUTER/OneDrive/Desktop/react-project/src/core/Public/Service/WaterTestResults/VisualizationGraph.tsx"],"names":["GeneralChart","CustomCheckBox","React","useEffect","useState","connect","chartConfig","LineChart","props","testParams","setTestParams","selected","setSelected","chartData","setChartData","seriesData","setSeriesData","otherSeriesData","setOtherSeriesData","params","chemical","filter","item","types","others","testResult","newData","xAxis","map","type","compareKey","handleSelect","name","includes","filteredData","chemicalSeries","otherCharts","forEach","index","testParam","find","param","parameter_name","push","smooth","data","single","parameter__parameter_name","total_value","newChart","Object","assign","boundaryGap","axisLabel","formatter","replace","series","console","log","chemicalSeriesOptionData","tooltip","trigger","axisPointer","legend","show","grid","left","right","bottom","containLabel","yAxis","id","e","mapStateToProps","state","language","i18nextData","languageType","testParamtersData","testParametersData","reportData","waterTestResultsData","mapDispatchToProps","connector"],"mappings":"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","sourcesContent":["import GeneralChart from \"components/UI/Charts/General\";\r\nimport CustomCheckBox from \"components/UI/CustomCheckbox\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { connect, ConnectedProps } from \"react-redux\";\r\nimport { TestParametersType } from \"store/modules/testParamters/getTestParameters\";\r\nimport { RootState } from \"store/root-reducer\";\r\nimport { chartConfig } from \"./configData\";\r\n\r\ntype SeriesConfig = {\r\n  name: string;\r\n  type: string;\r\n  smooth: boolean;\r\n  data: (string | number)[];\r\n};\r\n\r\ntype ChartDataType = {\r\n  xAxis: (string | number)[];\r\n};\r\n\r\ninterface Props extends PropsFromRedux {\r\n  type?: string;\r\n  compareKey: string;\r\n  defaultSelected: string[];\r\n}\r\n\r\nconst LineChart = (props: Props) => {\r\n  const [testParams, setTestParams] = useState<{\r\n    chemical: TestParametersType;\r\n    others: TestParametersType;\r\n  }>();\r\n\r\n  const [selected, setSelected] = useState<string[]>([]);\r\n  const [chartData, setChartData] = useState<ChartDataType>();\r\n\r\n  const [seriesData, setSeriesData] = useState<SeriesConfig[]>();\r\n  const [otherSeriesData, setOtherSeriesData] = useState<any[]>();\r\n\r\n  // const [tableData, setTableData] = useState<any>();\r\n\r\n  useEffect(() => {\r\n    if (props.testParams) {\r\n      const params = {\r\n        chemical: props.testParams.filter((item) => item.types === \"Chemical\"),\r\n        others: props.testParams.filter((item) => item.types === \"Other\"),\r\n      };\r\n      setTestParams(params);\r\n    }\r\n  }, [props.testParams]);\r\n\r\n  useEffect(() => {\r\n    if (props.testResult && props.testResult[0]) {\r\n      const newData: ChartDataType = {\r\n        xAxis: props.testResult.map((item) => `${props.type} ${item[props.compareKey]}`),\r\n      };\r\n      setChartData(newData);\r\n    }\r\n  }, [props.testResult]);\r\n\r\n  const handleSelect = (name: string) => {\r\n    if (selected?.includes(name)) {\r\n      const filteredData = selected.filter((item) => item !== name);\r\n      setSelected(filteredData);\r\n    } else {\r\n      setSelected([...selected, name]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const chemicalSeries: any = [];\r\n    const otherCharts: any = [];\r\n\r\n    selected.forEach((item, index) => {\r\n      const testParam = props.testParams?.find((param) => param.parameter_name === item);\r\n      if (testParam?.types === \"Chemical\") {\r\n        chemicalSeries.push({\r\n          name: testParam?.parameter_name,\r\n          type: \"line\",\r\n          smooth: true,\r\n          data: props.testResult.map((item) => {\r\n            return (\r\n              item.data?.find(\r\n                (single) => single.parameter__parameter_name === testParam?.parameter_name\r\n              )?.total_value || 0\r\n            );\r\n          }),\r\n        });\r\n      } else {\r\n        const newChart = Object.assign(\r\n          {},\r\n          {\r\n            ...chartConfig,\r\n            xAxis: {\r\n              type: \"category\",\r\n              boundaryGap: false,\r\n              data: chartData?.xAxis,\r\n              axisLabel: {\r\n                formatter: function (name) {\r\n                  return name?.replace(props.type, \"\");\r\n                },\r\n              },\r\n            },\r\n\r\n            series: [\r\n              {\r\n                name: testParam?.parameter_name,\r\n                type: \"line\",\r\n                smooth: true,\r\n                data: props.testResult?.map((item) => {\r\n                  return (\r\n                    item.data?.find(\r\n                      (single) => single.parameter__parameter_name === testParam?.parameter_name\r\n                    )?.total_value || 0\r\n                  );\r\n                }),\r\n              },\r\n            ],\r\n          }\r\n        );\r\n        otherCharts.push(newChart);\r\n      }\r\n    });\r\n\r\n    setSeriesData(chemicalSeries);\r\n    setOtherSeriesData(otherCharts);\r\n\r\n    console.log(props.testParams, \"**********\");\r\n\r\n    // const selectedData = selected.map((item) => ({\r\n    //   ...config,\r\n    //   name: props.options.find((opt) => opt.id === item)?.name || \"\",\r\n    //   data: chartData && chartData[item],\r\n    //   itemStyle: {\r\n    //     color: props.options.find((opt) => opt.id === item)?.color || \"\",\r\n    //   },\r\n    // }));\r\n    // const tableData = selected.map((item) => ({\r\n    //   name: props.options.find((opt) => opt.id === item)?.name || \"\",\r\n    //   color: props.options.find((opt) => opt.id === item)?.color || \"\",\r\n    //   data: chartData && chartData[item],\r\n    // }));\r\n    // setSeriesData(selectedData);\r\n    // setTableData(tableData);\r\n  }, [chartData, selected]);\r\n\r\n  const chemicalSeriesOptionData = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n      axisPointer: {\r\n        type: \"shadow\",\r\n      },\r\n    },\r\n    legend: {\r\n      show: true,\r\n    },\r\n    grid: {\r\n      left: \"3%\",\r\n      right: \"5%\",\r\n      bottom: \"3%\",\r\n      //   top: \"6%\",\r\n      containLabel: true,\r\n    },\r\n    xAxis: {\r\n      type: \"category\",\r\n      boundaryGap: false,\r\n      data: chartData?.xAxis,\r\n      axisLabel: {\r\n        formatter: function (name) {\r\n          return name?.replace(props.type, \"\");\r\n        },\r\n      },\r\n    },\r\n    yAxis: {\r\n      type: \"value\",\r\n    },\r\n    series: seriesData,\r\n  };\r\n\r\n  console.log(chartData, \"seeeflleede\");\r\n\r\n  return (\r\n    <div className=\"row\">\r\n      <div className=\"col-md-9\">\r\n        <GeneralChart minHeight={400} options={chemicalSeriesOptionData} />\r\n\r\n        {otherSeriesData &&\r\n          otherSeriesData.map((item) => <GeneralChart minHeight={400} options={item} />)}\r\n        {/* {tableData?.length > 0 && props.type && (\r\n          <DataTable\r\n            years={chartData?.xAxis}\r\n            tableData={tableData}\r\n            type={props.type}\r\n          />\r\n        )} */}\r\n      </div>\r\n      <div className=\"col-md-3 chartOptions\">\r\n        <h6>Select</h6>\r\n\r\n        <p>Chemicals</p>\r\n\r\n        <ul>\r\n          {testParams?.chemical.map((item) => (\r\n            <li key={item.id}>\r\n              <CustomCheckBox\r\n                id={\"\" + item.id}\r\n                label={item.parameter_name}\r\n                onChange={(e) => handleSelect(\"\" + item.parameter_name)}\r\n                checked={selected.includes(\"\" + item.parameter_name)}\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <p className=\"mt-3\">Others</p>\r\n\r\n        <ul>\r\n          {testParams?.others.map((item) => (\r\n            <li key={item.id}>\r\n              <CustomCheckBox\r\n                id={\"\" + item.id}\r\n                label={item.parameter_name}\r\n                onChange={(e) => handleSelect(\"\" + item.parameter_name)}\r\n                checked={selected.includes(\"\" + item.parameter_name)}\r\n              />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  language: state.i18nextData.languageType,\r\n  testParams: state.testParamtersData.testParametersData.data,\r\n  testResult: state.reportData.waterTestResultsData.data,\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nconst connector = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype PropsFromRedux = ConnectedProps<typeof connector>;\r\n\r\nexport default connector(LineChart);\r\n"]},"metadata":{},"sourceType":"module"}